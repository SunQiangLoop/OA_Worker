
2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.433ms] [34;1m[rows:-][0m SELECT DATABASE()

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[2.847ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'oa_workorder%' ORDER BY SCHEMA_NAME='oa_workorder' DESC,SCHEMA_NAME limit 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[2.146ms] [34;1m[rows:-][0m SELECT count(*) FROM information_schema.tables WHERE table_schema = 'oa_workorder' AND table_name = 'users' AND table_type = 'BASE TABLE'

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[64.957ms] [34;1m[rows:0][0m CREATE TABLE `users` (`id` bigint unsigned AUTO_INCREMENT,`created_at` datetime(3) NULL,`updated_at` datetime(3) NULL,`deleted_at` datetime(3) NULL,`username` varchar(64) NOT NULL,`email` varchar(128),`password_hash` varchar(255) NOT NULL,`password_plain` varchar(255),`status` varchar(20),`last_login_at` datetime(3) NULL,`lock_until` datetime(3) NULL,`failed_count` bigint,`department_id` bigint unsigned,`position` varchar(64),PRIMARY KEY (`id`),INDEX `idx_users_deleted_at` (`deleted_at`),UNIQUE INDEX `idx_users_username` (`username`),UNIQUE INDEX `idx_users_email` (`email`),INDEX `idx_users_status` (`status`),INDEX `idx_users_department_id` (`department_id`))

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.205ms] [34;1m[rows:-][0m SELECT DATABASE()

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.544ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'oa_workorder%' ORDER BY SCHEMA_NAME='oa_workorder' DESC,SCHEMA_NAME limit 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.695ms] [34;1m[rows:-][0m SELECT count(*) FROM information_schema.tables WHERE table_schema = 'oa_workorder' AND table_name = 'user_roles' AND table_type = 'BASE TABLE'

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[28.255ms] [34;1m[rows:0][0m CREATE TABLE `user_roles` (`user_id` bigint unsigned,`role_id` bigint unsigned,PRIMARY KEY (`user_id`,`role_id`))

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.196ms] [34;1m[rows:-][0m SELECT DATABASE()

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.671ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'oa_workorder%' ORDER BY SCHEMA_NAME='oa_workorder' DESC,SCHEMA_NAME limit 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.597ms] [34;1m[rows:-][0m SELECT count(*) FROM information_schema.tables WHERE table_schema = 'oa_workorder' AND table_name = 'roles' AND table_type = 'BASE TABLE'

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[6.392ms] [34;1m[rows:0][0m CREATE TABLE `roles` (`id` bigint unsigned AUTO_INCREMENT,`created_at` datetime(3) NULL,`updated_at` datetime(3) NULL,`deleted_at` datetime(3) NULL,`name` varchar(64) NOT NULL,`description` varchar(255),PRIMARY KEY (`id`),INDEX `idx_roles_deleted_at` (`deleted_at`),UNIQUE INDEX `idx_roles_name` (`name`))

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.143ms] [34;1m[rows:-][0m SELECT DATABASE()

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.597ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'oa_workorder%' ORDER BY SCHEMA_NAME='oa_workorder' DESC,SCHEMA_NAME limit 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[1.032ms] [34;1m[rows:-][0m SELECT count(*) FROM information_schema.tables WHERE table_schema = 'oa_workorder' AND table_name = 'role_permissions' AND table_type = 'BASE TABLE'

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[17.881ms] [34;1m[rows:0][0m CREATE TABLE `role_permissions` (`role_id` bigint unsigned,`permission_id` bigint unsigned,PRIMARY KEY (`role_id`,`permission_id`))

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.318ms] [34;1m[rows:-][0m SELECT DATABASE()

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[1.050ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'oa_workorder%' ORDER BY SCHEMA_NAME='oa_workorder' DESC,SCHEMA_NAME limit 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.618ms] [34;1m[rows:-][0m SELECT count(*) FROM information_schema.tables WHERE table_schema = 'oa_workorder' AND table_name = 'permissions' AND table_type = 'BASE TABLE'

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[6.926ms] [34;1m[rows:0][0m CREATE TABLE `permissions` (`id` bigint unsigned AUTO_INCREMENT,`created_at` datetime(3) NULL,`updated_at` datetime(3) NULL,`deleted_at` datetime(3) NULL,`code` varchar(64) NOT NULL,`description` varchar(255),PRIMARY KEY (`id`),INDEX `idx_permissions_deleted_at` (`deleted_at`),UNIQUE INDEX `idx_permissions_code` (`code`))

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.161ms] [34;1m[rows:-][0m SELECT DATABASE()

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.446ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'oa_workorder%' ORDER BY SCHEMA_NAME='oa_workorder' DESC,SCHEMA_NAME limit 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.717ms] [34;1m[rows:-][0m SELECT count(*) FROM information_schema.tables WHERE table_schema = 'oa_workorder' AND table_name = 'refresh_tokens' AND table_type = 'BASE TABLE'

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[7.192ms] [34;1m[rows:0][0m CREATE TABLE `refresh_tokens` (`id` bigint unsigned AUTO_INCREMENT,`created_at` datetime(3) NULL,`updated_at` datetime(3) NULL,`deleted_at` datetime(3) NULL,`user_id` bigint unsigned,`token_hash` varchar(128) NOT NULL,`expires_at` datetime(3) NULL,`revoked_at` datetime(3) NULL,PRIMARY KEY (`id`),INDEX `idx_refresh_tokens_deleted_at` (`deleted_at`),INDEX `idx_refresh_tokens_user_id` (`user_id`),UNIQUE INDEX `idx_refresh_tokens_token_hash` (`token_hash`),INDEX `idx_refresh_tokens_expires_at` (`expires_at`))

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.108ms] [34;1m[rows:-][0m SELECT DATABASE()

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.512ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'oa_workorder%' ORDER BY SCHEMA_NAME='oa_workorder' DESC,SCHEMA_NAME limit 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.671ms] [34;1m[rows:-][0m SELECT count(*) FROM information_schema.tables WHERE table_schema = 'oa_workorder' AND table_name = 'api_keys' AND table_type = 'BASE TABLE'

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[5.971ms] [34;1m[rows:0][0m CREATE TABLE `api_keys` (`id` bigint unsigned AUTO_INCREMENT,`created_at` datetime(3) NULL,`updated_at` datetime(3) NULL,`deleted_at` datetime(3) NULL,`name` varchar(128),`key_id` varchar(64) NOT NULL,`secret` varchar(128) NOT NULL,`status` varchar(20),`last_used_at` datetime(3) NULL,PRIMARY KEY (`id`),INDEX `idx_api_keys_deleted_at` (`deleted_at`),UNIQUE INDEX `idx_api_keys_key_id` (`key_id`),INDEX `idx_api_keys_status` (`status`))

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.108ms] [34;1m[rows:-][0m SELECT DATABASE()

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.567ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'oa_workorder%' ORDER BY SCHEMA_NAME='oa_workorder' DESC,SCHEMA_NAME limit 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.471ms] [34;1m[rows:-][0m SELECT count(*) FROM information_schema.tables WHERE table_schema = 'oa_workorder' AND table_name = 'api_nonces' AND table_type = 'BASE TABLE'

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[5.392ms] [34;1m[rows:0][0m CREATE TABLE `api_nonces` (`id` bigint unsigned AUTO_INCREMENT,`created_at` datetime(3) NULL,`updated_at` datetime(3) NULL,`deleted_at` datetime(3) NULL,`key_id` varchar(64),`nonce` varchar(64),`expires_at` datetime(3) NULL,PRIMARY KEY (`id`),INDEX `idx_api_nonces_deleted_at` (`deleted_at`),INDEX `idx_api_nonces_key_id` (`key_id`),INDEX `idx_api_nonces_nonce` (`nonce`),INDEX `idx_api_nonces_expires_at` (`expires_at`))

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.090ms] [34;1m[rows:-][0m SELECT DATABASE()

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.270ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'oa_workorder%' ORDER BY SCHEMA_NAME='oa_workorder' DESC,SCHEMA_NAME limit 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.508ms] [34;1m[rows:-][0m SELECT count(*) FROM information_schema.tables WHERE table_schema = 'oa_workorder' AND table_name = 'tickets' AND table_type = 'BASE TABLE'

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[7.117ms] [34;1m[rows:0][0m CREATE TABLE `tickets` (`id` bigint unsigned AUTO_INCREMENT,`created_at` datetime(3) NULL,`updated_at` datetime(3) NULL,`deleted_at` datetime(3) NULL,`title` varchar(200),`description` text,`status` varchar(30),`priority` varchar(20),`created_by` bigint unsigned,`assignee_id` bigint unsigned,`type` varchar(30) DEFAULT 'other',`amount` double,PRIMARY KEY (`id`),INDEX `idx_tickets_deleted_at` (`deleted_at`),INDEX `idx_tickets_title` (`title`),INDEX `idx_tickets_status` (`status`),INDEX `idx_tickets_priority` (`priority`),INDEX `idx_tickets_created_by` (`created_by`),INDEX `idx_tickets_assignee_id` (`assignee_id`),INDEX `idx_tickets_type` (`type`))

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.112ms] [34;1m[rows:-][0m SELECT DATABASE()

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.292ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'oa_workorder%' ORDER BY SCHEMA_NAME='oa_workorder' DESC,SCHEMA_NAME limit 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.349ms] [34;1m[rows:-][0m SELECT count(*) FROM information_schema.tables WHERE table_schema = 'oa_workorder' AND table_name = 'departments' AND table_type = 'BASE TABLE'

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[4.153ms] [34;1m[rows:0][0m CREATE TABLE `departments` (`id` bigint unsigned AUTO_INCREMENT,`created_at` datetime(3) NULL,`updated_at` datetime(3) NULL,`deleted_at` datetime(3) NULL,`name` varchar(64) NOT NULL,`parent_id` bigint unsigned,`manager_id` bigint unsigned,`sort_order` bigint DEFAULT 0,PRIMARY KEY (`id`),INDEX `idx_departments_deleted_at` (`deleted_at`),UNIQUE INDEX `idx_departments_name` (`name`),INDEX `idx_departments_parent_id` (`parent_id`),INDEX `idx_departments_manager_id` (`manager_id`))

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.108ms] [34;1m[rows:-][0m SELECT DATABASE()

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.308ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'oa_workorder%' ORDER BY SCHEMA_NAME='oa_workorder' DESC,SCHEMA_NAME limit 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.329ms] [34;1m[rows:-][0m SELECT count(*) FROM information_schema.tables WHERE table_schema = 'oa_workorder' AND table_name = 'form_definitions' AND table_type = 'BASE TABLE'

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[2.437ms] [34;1m[rows:0][0m CREATE TABLE `form_definitions` (`id` bigint unsigned AUTO_INCREMENT,`created_at` datetime(3) NULL,`updated_at` datetime(3) NULL,`deleted_at` datetime(3) NULL,`code` varchar(64) NOT NULL,`name` varchar(128) NOT NULL,`schema_json` json,`is_active` boolean DEFAULT true,`version` bigint DEFAULT 1,`created_by` bigint unsigned,PRIMARY KEY (`id`),INDEX `idx_form_definitions_deleted_at` (`deleted_at`),UNIQUE INDEX `idx_form_definitions_code` (`code`),INDEX `idx_form_definitions_created_by` (`created_by`))

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.050ms] [34;1m[rows:-][0m SELECT DATABASE()

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.213ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'oa_workorder%' ORDER BY SCHEMA_NAME='oa_workorder' DESC,SCHEMA_NAME limit 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.308ms] [34;1m[rows:-][0m SELECT count(*) FROM information_schema.tables WHERE table_schema = 'oa_workorder' AND table_name = 'form_data' AND table_type = 'BASE TABLE'

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[3.334ms] [34;1m[rows:0][0m CREATE TABLE `form_data` (`id` bigint unsigned AUTO_INCREMENT,`created_at` datetime(3) NULL,`updated_at` datetime(3) NULL,`deleted_at` datetime(3) NULL,`form_id` bigint unsigned NOT NULL,`owner_id` bigint unsigned NOT NULL,`data_json` json,`status` varchar(20),PRIMARY KEY (`id`),INDEX `idx_form_data_deleted_at` (`deleted_at`),INDEX `idx_form_data_form_id` (`form_id`),INDEX `idx_form_data_owner_id` (`owner_id`),INDEX `idx_form_data_status` (`status`))

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.089ms] [34;1m[rows:-][0m SELECT DATABASE()

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.263ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'oa_workorder%' ORDER BY SCHEMA_NAME='oa_workorder' DESC,SCHEMA_NAME limit 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.339ms] [34;1m[rows:-][0m SELECT count(*) FROM information_schema.tables WHERE table_schema = 'oa_workorder' AND table_name = 'expense_reimbursements' AND table_type = 'BASE TABLE'

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[3.570ms] [34;1m[rows:0][0m CREATE TABLE `expense_reimbursements` (`id` bigint unsigned AUTO_INCREMENT,`created_at` datetime(3) NULL,`updated_at` datetime(3) NULL,`deleted_at` datetime(3) NULL,`form_data_id` bigint unsigned NOT NULL,`reimbursement_type` varchar(20),`reason` varchar(255),`total_amount` double,`currency` varchar(10) DEFAULT 'CNY',`summary` varchar(255),`status` varchar(20),`workflow_instance_id` bigint unsigned,PRIMARY KEY (`id`),INDEX `idx_expense_reimbursements_deleted_at` (`deleted_at`),INDEX `idx_expense_reimbursements_form_data_id` (`form_data_id`),INDEX `idx_expense_reimbursements_reimbursement_type` (`reimbursement_type`),INDEX `idx_expense_reimbursements_status` (`status`),INDEX `idx_expense_reimbursements_workflow_instance_id` (`workflow_instance_id`))

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.052ms] [34;1m[rows:-][0m SELECT DATABASE()

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.208ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'oa_workorder%' ORDER BY SCHEMA_NAME='oa_workorder' DESC,SCHEMA_NAME limit 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.329ms] [34;1m[rows:-][0m SELECT count(*) FROM information_schema.tables WHERE table_schema = 'oa_workorder' AND table_name = 'expense_items' AND table_type = 'BASE TABLE'

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[3.409ms] [34;1m[rows:0][0m CREATE TABLE `expense_items` (`id` bigint unsigned AUTO_INCREMENT,`created_at` datetime(3) NULL,`updated_at` datetime(3) NULL,`deleted_at` datetime(3) NULL,`reimbursement_id` bigint unsigned NOT NULL,`item_date` datetime(3) NULL,`item_desc` varchar(255),`amount` double,PRIMARY KEY (`id`),INDEX `idx_expense_items_deleted_at` (`deleted_at`),INDEX `idx_expense_items_reimbursement_id` (`reimbursement_id`),CONSTRAINT `fk_expense_reimbursements_items` FOREIGN KEY (`reimbursement_id`) REFERENCES `expense_reimbursements`(`id`))

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.089ms] [34;1m[rows:-][0m SELECT DATABASE()

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.288ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'oa_workorder%' ORDER BY SCHEMA_NAME='oa_workorder' DESC,SCHEMA_NAME limit 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.398ms] [34;1m[rows:-][0m SELECT count(*) FROM information_schema.tables WHERE table_schema = 'oa_workorder' AND table_name = 'attachments' AND table_type = 'BASE TABLE'

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[3.272ms] [34;1m[rows:0][0m CREATE TABLE `attachments` (`id` bigint unsigned AUTO_INCREMENT,`created_at` datetime(3) NULL,`updated_at` datetime(3) NULL,`deleted_at` datetime(3) NULL,`reimbursement_id` bigint unsigned NOT NULL,`file_name` varchar(255),`file_size` bigint,`mime_type` varchar(100),`storage_path` varchar(255),PRIMARY KEY (`id`),INDEX `idx_attachments_deleted_at` (`deleted_at`),INDEX `idx_attachments_reimbursement_id` (`reimbursement_id`),CONSTRAINT `fk_expense_reimbursements_attachments` FOREIGN KEY (`reimbursement_id`) REFERENCES `expense_reimbursements`(`id`))

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.060ms] [34;1m[rows:-][0m SELECT DATABASE()

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.208ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'oa_workorder%' ORDER BY SCHEMA_NAME='oa_workorder' DESC,SCHEMA_NAME limit 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.296ms] [34;1m[rows:-][0m SELECT count(*) FROM information_schema.tables WHERE table_schema = 'oa_workorder' AND table_name = 'workflow_templates' AND table_type = 'BASE TABLE'

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[2.454ms] [34;1m[rows:0][0m CREATE TABLE `workflow_templates` (`id` bigint unsigned AUTO_INCREMENT,`created_at` datetime(3) NULL,`updated_at` datetime(3) NULL,`deleted_at` datetime(3) NULL,`name` varchar(128) NOT NULL,`description` varchar(255),`version` bigint DEFAULT 1,`is_active` boolean DEFAULT true,`created_by` bigint unsigned,PRIMARY KEY (`id`),INDEX `idx_workflow_templates_deleted_at` (`deleted_at`),INDEX `idx_workflow_templates_created_by` (`created_by`))

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.073ms] [34;1m[rows:-][0m SELECT DATABASE()

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.290ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'oa_workorder%' ORDER BY SCHEMA_NAME='oa_workorder' DESC,SCHEMA_NAME limit 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.343ms] [34;1m[rows:-][0m SELECT count(*) FROM information_schema.tables WHERE table_schema = 'oa_workorder' AND table_name = 'process_nodes' AND table_type = 'BASE TABLE'

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[3.540ms] [34;1m[rows:0][0m CREATE TABLE `process_nodes` (`id` bigint unsigned AUTO_INCREMENT,`created_at` datetime(3) NULL,`updated_at` datetime(3) NULL,`deleted_at` datetime(3) NULL,`template_id` bigint unsigned NOT NULL,`node_key` varchar(64),`node_type` varchar(20),`assignee_rule` json,`condition_rule` json,`next_node_key` varchar(64),PRIMARY KEY (`id`),INDEX `idx_process_nodes_deleted_at` (`deleted_at`),INDEX `idx_process_nodes_template_id` (`template_id`),INDEX `idx_process_nodes_node_key` (`node_key`),INDEX `idx_process_nodes_node_type` (`node_type`),CONSTRAINT `fk_workflow_templates_nodes` FOREIGN KEY (`template_id`) REFERENCES `workflow_templates`(`id`))

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.060ms] [34;1m[rows:-][0m SELECT DATABASE()

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.214ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'oa_workorder%' ORDER BY SCHEMA_NAME='oa_workorder' DESC,SCHEMA_NAME limit 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.286ms] [34;1m[rows:-][0m SELECT count(*) FROM information_schema.tables WHERE table_schema = 'oa_workorder' AND table_name = 'workflow_instances' AND table_type = 'BASE TABLE'

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[4.056ms] [34;1m[rows:0][0m CREATE TABLE `workflow_instances` (`id` bigint unsigned AUTO_INCREMENT,`created_at` datetime(3) NULL,`updated_at` datetime(3) NULL,`deleted_at` datetime(3) NULL,`template_id` bigint unsigned NOT NULL,`business_type` varchar(50),`business_id` bigint unsigned,`status` varchar(20),`current_node_key` varchar(64),`started_by` bigint unsigned,`started_at` datetime(3) NULL,`finished_at` datetime(3) NULL,PRIMARY KEY (`id`),INDEX `idx_workflow_instances_deleted_at` (`deleted_at`),INDEX `idx_workflow_instances_template_id` (`template_id`),INDEX `idx_workflow_instances_business_type` (`business_type`),INDEX `idx_workflow_instances_business_id` (`business_id`),INDEX `idx_workflow_instances_status` (`status`),INDEX `idx_workflow_instances_started_by` (`started_by`))

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.090ms] [34;1m[rows:-][0m SELECT DATABASE()

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.253ms] [34;1m[rows:1][0m SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'oa_workorder%' ORDER BY SCHEMA_NAME='oa_workorder' DESC,SCHEMA_NAME limit 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.328ms] [34;1m[rows:-][0m SELECT count(*) FROM information_schema.tables WHERE table_schema = 'oa_workorder' AND table_name = 'approval_logs' AND table_type = 'BASE TABLE'

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[2.941ms] [34;1m[rows:0][0m CREATE TABLE `approval_logs` (`id` bigint unsigned AUTO_INCREMENT,`created_at` datetime(3) NULL,`updated_at` datetime(3) NULL,`deleted_at` datetime(3) NULL,`instance_id` bigint unsigned NOT NULL,`node_key` varchar(64),`actor_id` bigint unsigned,`action` varchar(20),`comment` varchar(255),PRIMARY KEY (`id`),INDEX `idx_approval_logs_deleted_at` (`deleted_at`),INDEX `idx_approval_logs_instance_id` (`instance_id`),INDEX `idx_approval_logs_node_key` (`node_key`),INDEX `idx_approval_logs_actor_id` (`actor_id`))

2026/02/03 22:15:11 [31;1m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:23 [35;1mrecord not found
[0m[33m[0.727ms] [34;1m[rows:0][0m SELECT * FROM `permissions` WHERE code = 'ticket:read' AND `permissions`.`deleted_at` IS NULL ORDER BY `permissions`.`id` LIMIT 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:25
[0m[33m[2.178ms] [34;1m[rows:1][0m INSERT INTO `permissions` (`created_at`,`updated_at`,`deleted_at`,`code`,`description`) VALUES ('2026-02-03 22:15:11.669','2026-02-03 22:15:11.669',NULL,'ticket:read','Read tickets')

2026/02/03 22:15:11 [31;1m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:23 [35;1mrecord not found
[0m[33m[0.239ms] [34;1m[rows:0][0m SELECT * FROM `permissions` WHERE code = 'ticket:write' AND `permissions`.`deleted_at` IS NULL ORDER BY `permissions`.`id` LIMIT 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:25
[0m[33m[0.359ms] [34;1m[rows:1][0m INSERT INTO `permissions` (`created_at`,`updated_at`,`deleted_at`,`code`,`description`) VALUES ('2026-02-03 22:15:11.671','2026-02-03 22:15:11.671',NULL,'ticket:write','Create/update tickets')

2026/02/03 22:15:11 [31;1m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:23 [35;1mrecord not found
[0m[33m[0.607ms] [34;1m[rows:0][0m SELECT * FROM `permissions` WHERE code = 'user:read' AND `permissions`.`deleted_at` IS NULL ORDER BY `permissions`.`id` LIMIT 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:25
[0m[33m[0.269ms] [34;1m[rows:1][0m INSERT INTO `permissions` (`created_at`,`updated_at`,`deleted_at`,`code`,`description`) VALUES ('2026-02-03 22:15:11.673','2026-02-03 22:15:11.673',NULL,'user:read','Read users')

2026/02/03 22:15:11 [31;1m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:23 [35;1mrecord not found
[0m[33m[0.117ms] [34;1m[rows:0][0m SELECT * FROM `permissions` WHERE code = 'user:write' AND `permissions`.`deleted_at` IS NULL ORDER BY `permissions`.`id` LIMIT 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:25
[0m[33m[0.314ms] [34;1m[rows:1][0m INSERT INTO `permissions` (`created_at`,`updated_at`,`deleted_at`,`code`,`description`) VALUES ('2026-02-03 22:15:11.673','2026-02-03 22:15:11.673',NULL,'user:write','Manage users')

2026/02/03 22:15:11 [31;1m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:33 [35;1mrecord not found
[0m[33m[0.381ms] [34;1m[rows:0][0m SELECT * FROM `roles` WHERE name = 'admin' AND `roles`.`deleted_at` IS NULL ORDER BY `roles`.`id` LIMIT 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:36
[0m[33m[0.299ms] [34;1m[rows:1][0m INSERT INTO `roles` (`created_at`,`updated_at`,`deleted_at`,`name`,`description`) VALUES ('2026-02-03 22:15:11.674','2026-02-03 22:15:11.674',NULL,'admin','Administrator')

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:43
[0m[33m[0.120ms] [34;1m[rows:4][0m SELECT * FROM `permissions` WHERE `permissions`.`deleted_at` IS NULL

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:44
[0m[33m[0.166ms] [34;1m[rows:0][0m INSERT INTO `permissions` (`created_at`,`updated_at`,`deleted_at`,`code`,`description`,`id`) VALUES ('2026-02-03 22:15:11.669','2026-02-03 22:15:11.669',NULL,'ticket:read','Read tickets',1),('2026-02-03 22:15:11.671','2026-02-03 22:15:11.671',NULL,'ticket:write','Create/update tickets',2),('2026-02-03 22:15:11.673','2026-02-03 22:15:11.673',NULL,'user:read','Read users',3),('2026-02-03 22:15:11.673','2026-02-03 22:15:11.673',NULL,'user:write','Manage users',4) ON DUPLICATE KEY UPDATE `id`=`id`

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:44
[0m[33m[0.273ms] [34;1m[rows:4][0m INSERT INTO `role_permissions` (`role_id`,`permission_id`) VALUES (1,1),(1,2),(1,3),(1,4) ON DUPLICATE KEY UPDATE `role_id`=`role_id`

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:44
[0m[33m[0.952ms] [34;1m[rows:0][0m UPDATE `roles` SET `updated_at`='2026-02-03 22:15:11.674' WHERE `roles`.`deleted_at` IS NULL AND `id` = 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:44
[0m[33m[0.244ms] [34;1m[rows:0][0m DELETE FROM `role_permissions` WHERE `role_permissions`.`role_id` = 1 AND `role_permissions`.`permission_id` NOT IN (1,2,3,4)

2026/02/03 22:15:11 [31;1m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:48 [35;1mrecord not found
[0m[33m[0.386ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE username = 'admin' AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:61
[0m[33m[0.983ms] [34;1m[rows:1][0m INSERT INTO `users` (`created_at`,`updated_at`,`deleted_at`,`username`,`email`,`password_hash`,`password_plain`,`status`,`last_login_at`,`lock_until`,`failed_count`,`department_id`,`position`) VALUES ('2026-02-03 22:15:11.746','2026-02-03 22:15:11.746',NULL,'admin','admin@example.com','$argon2id$v=19$m=65536,t=3,p=2$qCA3bMN3l0+9QXPlWiYx5Q$VslNSNteb90YKrtzqdPaCSvRXfTqdMQDsRpM0DVCxQM','admin123','active',NULL,NULL,0,NULL,'')

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:64
[0m[33m[0.638ms] [34;1m[rows:0][0m INSERT INTO `roles` (`created_at`,`updated_at`,`deleted_at`,`name`,`description`,`id`) VALUES ('2026-02-03 22:15:11.674','2026-02-03 22:15:11.674',NULL,'admin','Administrator',1) ON DUPLICATE KEY UPDATE `id`=`id`

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:64
[0m[33m[0.836ms] [34;1m[rows:1][0m INSERT INTO `user_roles` (`user_id`,`role_id`) VALUES (1,1) ON DUPLICATE KEY UPDATE `user_id`=`user_id`

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:64
[0m[33m[2.319ms] [34;1m[rows:1][0m UPDATE `users` SET `updated_at`='2026-02-03 22:15:11.747' WHERE `users`.`deleted_at` IS NULL AND `id` = 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:84
[0m[33m[0.940ms] [34;1m[rows:1][0m SELECT count(*) FROM `departments` WHERE `departments`.`deleted_at` IS NULL

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:99
[0m[33m[0.929ms] [34;1m[rows:1][0m INSERT INTO `departments` (`created_at`,`updated_at`,`deleted_at`,`name`,`parent_id`,`manager_id`,`sort_order`) VALUES ('2026-02-03 22:15:11.75','2026-02-03 22:15:11.75',NULL,'æ€»ç»ç†åŠžå…¬å®¤',NULL,NULL,1)

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:99
[0m[33m[0.559ms] [34;1m[rows:1][0m INSERT INTO `departments` (`created_at`,`updated_at`,`deleted_at`,`name`,`parent_id`,`manager_id`,`sort_order`) VALUES ('2026-02-03 22:15:11.751','2026-02-03 22:15:11.751',NULL,'å¸‚åœºéƒ¨',NULL,NULL,2)

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:99
[0m[33m[0.463ms] [34;1m[rows:1][0m INSERT INTO `departments` (`created_at`,`updated_at`,`deleted_at`,`name`,`parent_id`,`manager_id`,`sort_order`) VALUES ('2026-02-03 22:15:11.752','2026-02-03 22:15:11.752',NULL,'è´¢åŠ¡éƒ¨',NULL,NULL,3)

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:99
[0m[33m[0.359ms] [34;1m[rows:1][0m INSERT INTO `departments` (`created_at`,`updated_at`,`deleted_at`,`name`,`parent_id`,`manager_id`,`sort_order`) VALUES ('2026-02-03 22:15:11.752','2026-02-03 22:15:11.752',NULL,'æŠ€æœ¯éƒ¨',NULL,NULL,4)

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:99
[0m[33m[0.360ms] [34;1m[rows:1][0m INSERT INTO `departments` (`created_at`,`updated_at`,`deleted_at`,`name`,`parent_id`,`manager_id`,`sort_order`) VALUES ('2026-02-03 22:15:11.753','2026-02-03 22:15:11.753',NULL,'é”€å”®éƒ¨',NULL,NULL,5)

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:123
[0m[33m[0.922ms] [34;1m[rows:1][0m INSERT INTO `users` (`created_at`,`updated_at`,`deleted_at`,`username`,`email`,`password_hash`,`password_plain`,`status`,`last_login_at`,`lock_until`,`failed_count`,`department_id`,`position`) VALUES ('2026-02-03 22:15:11.819','2026-02-03 22:15:11.819',NULL,'æ€»ç»ç†','gm@company.com','$argon2id$v=19$m=65536,t=3,p=2$S8C5GW/mrpuhuHcp46LBZQ$GBY9N6HF0YaOAgw0gwmuo6Ev++w9h3U2uyZjSwN6bKA','123456','active',NULL,NULL,0,1,'æ€»ç»ç†')

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:123
[0m[33m[0.843ms] [34;1m[rows:1][0m INSERT INTO `users` (`created_at`,`updated_at`,`deleted_at`,`username`,`email`,`password_hash`,`password_plain`,`status`,`last_login_at`,`lock_until`,`failed_count`,`department_id`,`position`) VALUES ('2026-02-03 22:15:11.82','2026-02-03 22:15:11.82',NULL,'å¸‚åœºéƒ¨ç»ç†','mkt_mgr@company.com','$argon2id$v=19$m=65536,t=3,p=2$S8C5GW/mrpuhuHcp46LBZQ$GBY9N6HF0YaOAgw0gwmuo6Ev++w9h3U2uyZjSwN6bKA','123456','active',NULL,NULL,0,2,'éƒ¨é—¨ç»ç†')

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:123
[0m[33m[0.722ms] [34;1m[rows:1][0m INSERT INTO `users` (`created_at`,`updated_at`,`deleted_at`,`username`,`email`,`password_hash`,`password_plain`,`status`,`last_login_at`,`lock_until`,`failed_count`,`department_id`,`position`) VALUES ('2026-02-03 22:15:11.82','2026-02-03 22:15:11.82',NULL,'è´¢åŠ¡éƒ¨ç»ç†','fin_mgr@company.com','$argon2id$v=19$m=65536,t=3,p=2$S8C5GW/mrpuhuHcp46LBZQ$GBY9N6HF0YaOAgw0gwmuo6Ev++w9h3U2uyZjSwN6bKA','123456','active',NULL,NULL,0,3,'éƒ¨é—¨ç»ç†')

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:123
[0m[33m[0.550ms] [34;1m[rows:1][0m INSERT INTO `users` (`created_at`,`updated_at`,`deleted_at`,`username`,`email`,`password_hash`,`password_plain`,`status`,`last_login_at`,`lock_until`,`failed_count`,`department_id`,`position`) VALUES ('2026-02-03 22:15:11.821','2026-02-03 22:15:11.821',NULL,'ä¼šè®¡','accountant@company.com','$argon2id$v=19$m=65536,t=3,p=2$S8C5GW/mrpuhuHcp46LBZQ$GBY9N6HF0YaOAgw0gwmuo6Ev++w9h3U2uyZjSwN6bKA','123456','active',NULL,NULL,0,3,'ä¼šè®¡')

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:123
[0m[33m[0.612ms] [34;1m[rows:1][0m INSERT INTO `users` (`created_at`,`updated_at`,`deleted_at`,`username`,`email`,`password_hash`,`password_plain`,`status`,`last_login_at`,`lock_until`,`failed_count`,`department_id`,`position`) VALUES ('2026-02-03 22:15:11.822','2026-02-03 22:15:11.822',NULL,'å‡ºçº³','cashier@company.com','$argon2id$v=19$m=65536,t=3,p=2$S8C5GW/mrpuhuHcp46LBZQ$GBY9N6HF0YaOAgw0gwmuo6Ev++w9h3U2uyZjSwN6bKA','123456','active',NULL,NULL,0,3,'å‡ºçº³')

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:123
[0m[33m[0.617ms] [34;1m[rows:1][0m INSERT INTO `users` (`created_at`,`updated_at`,`deleted_at`,`username`,`email`,`password_hash`,`password_plain`,`status`,`last_login_at`,`lock_until`,`failed_count`,`department_id`,`position`) VALUES ('2026-02-03 22:15:11.822','2026-02-03 22:15:11.822',NULL,'æŠ€æœ¯éƒ¨ç»ç†','tech_mgr@company.com','$argon2id$v=19$m=65536,t=3,p=2$S8C5GW/mrpuhuHcp46LBZQ$GBY9N6HF0YaOAgw0gwmuo6Ev++w9h3U2uyZjSwN6bKA','123456','active',NULL,NULL,0,4,'éƒ¨é—¨ç»ç†')

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:123
[0m[33m[0.618ms] [34;1m[rows:1][0m INSERT INTO `users` (`created_at`,`updated_at`,`deleted_at`,`username`,`email`,`password_hash`,`password_plain`,`status`,`last_login_at`,`lock_until`,`failed_count`,`department_id`,`position`) VALUES ('2026-02-03 22:15:11.823','2026-02-03 22:15:11.823',NULL,'é”€å”®éƒ¨ç»ç†','sales_mgr@company.com','$argon2id$v=19$m=65536,t=3,p=2$S8C5GW/mrpuhuHcp46LBZQ$GBY9N6HF0YaOAgw0gwmuo6Ev++w9h3U2uyZjSwN6bKA','123456','active',NULL,NULL,0,5,'éƒ¨é—¨ç»ç†')

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:140
[0m[33m[0.392ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE username = 'é”€å”®éƒ¨ç»ç†' AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:141
[0m[33m[1.068ms] [34;1m[rows:1][0m UPDATE `departments` SET `manager_id`=8,`updated_at`='2026-02-03 22:15:11.824' WHERE name = 'é”€å”®éƒ¨' AND `departments`.`deleted_at` IS NULL

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:140
[0m[33m[0.424ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE username = 'æ€»ç»ç†' AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:141
[0m[33m[1.068ms] [34;1m[rows:1][0m UPDATE `departments` SET `manager_id`=2,`updated_at`='2026-02-03 22:15:11.826' WHERE name = 'æ€»ç»ç†åŠžå…¬å®¤' AND `departments`.`deleted_at` IS NULL

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:140
[0m[33m[0.177ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE username = 'å¸‚åœºéƒ¨ç»ç†' AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:141
[0m[33m[0.451ms] [34;1m[rows:1][0m UPDATE `departments` SET `manager_id`=3,`updated_at`='2026-02-03 22:15:11.827' WHERE name = 'å¸‚åœºéƒ¨' AND `departments`.`deleted_at` IS NULL

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:140
[0m[33m[0.260ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE username = 'è´¢åŠ¡éƒ¨ç»ç†' AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:141
[0m[33m[0.629ms] [34;1m[rows:1][0m UPDATE `departments` SET `manager_id`=4,`updated_at`='2026-02-03 22:15:11.828' WHERE name = 'è´¢åŠ¡éƒ¨' AND `departments`.`deleted_at` IS NULL

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:140
[0m[33m[0.261ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE username = 'æŠ€æœ¯éƒ¨ç»ç†' AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:141
[0m[33m[0.689ms] [34;1m[rows:1][0m UPDATE `departments` SET `manager_id`=7,`updated_at`='2026-02-03 22:15:11.829' WHERE name = 'æŠ€æœ¯éƒ¨' AND `departments`.`deleted_at` IS NULL

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:147
[0m[33m[0.193ms] [34;1m[rows:1][0m SELECT * FROM `roles` WHERE name = 'admin' AND `roles`.`deleted_at` IS NULL ORDER BY `roles`.`id` LIMIT 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:150
[0m[33m[0.161ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE username = 'æ€»ç»ç†' AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:151
[0m[33m[0.211ms] [34;1m[rows:0][0m INSERT INTO `roles` (`created_at`,`updated_at`,`deleted_at`,`name`,`description`,`id`) VALUES ('2026-02-03 22:15:11.674','2026-02-03 22:15:11.674',NULL,'admin','Administrator',1) ON DUPLICATE KEY UPDATE `id`=`id`

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:151
[0m[33m[0.209ms] [34;1m[rows:1][0m INSERT INTO `user_roles` (`user_id`,`role_id`) VALUES (2,1) ON DUPLICATE KEY UPDATE `user_id`=`user_id`

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:151
[0m[33m[1.185ms] [34;1m[rows:1][0m UPDATE `users` SET `updated_at`='2026-02-03 22:15:11.83' WHERE `users`.`deleted_at` IS NULL AND `id` = 2

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:150
[0m[33m[0.250ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE username = 'å¸‚åœºéƒ¨ç»ç†' AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:151
[0m[33m[0.198ms] [34;1m[rows:0][0m INSERT INTO `roles` (`created_at`,`updated_at`,`deleted_at`,`name`,`description`,`id`) VALUES ('2026-02-03 22:15:11.674','2026-02-03 22:15:11.674',NULL,'admin','Administrator',1) ON DUPLICATE KEY UPDATE `id`=`id`

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:151
[0m[33m[0.225ms] [34;1m[rows:1][0m INSERT INTO `user_roles` (`user_id`,`role_id`) VALUES (3,1) ON DUPLICATE KEY UPDATE `user_id`=`user_id`

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:151
[0m[33m[1.331ms] [34;1m[rows:1][0m UPDATE `users` SET `updated_at`='2026-02-03 22:15:11.831' WHERE `users`.`deleted_at` IS NULL AND `id` = 3

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:150
[0m[33m[0.284ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE username = 'è´¢åŠ¡éƒ¨ç»ç†' AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:151
[0m[33m[0.205ms] [34;1m[rows:0][0m INSERT INTO `roles` (`created_at`,`updated_at`,`deleted_at`,`name`,`description`,`id`) VALUES ('2026-02-03 22:15:11.674','2026-02-03 22:15:11.674',NULL,'admin','Administrator',1) ON DUPLICATE KEY UPDATE `id`=`id`

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:151
[0m[33m[0.223ms] [34;1m[rows:1][0m INSERT INTO `user_roles` (`user_id`,`role_id`) VALUES (4,1) ON DUPLICATE KEY UPDATE `user_id`=`user_id`

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:151
[0m[33m[1.436ms] [34;1m[rows:1][0m UPDATE `users` SET `updated_at`='2026-02-03 22:15:11.833' WHERE `users`.`deleted_at` IS NULL AND `id` = 4

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:150
[0m[33m[0.308ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE username = 'ä¼šè®¡' AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:151
[0m[33m[0.142ms] [34;1m[rows:0][0m INSERT INTO `roles` (`created_at`,`updated_at`,`deleted_at`,`name`,`description`,`id`) VALUES ('2026-02-03 22:15:11.674','2026-02-03 22:15:11.674',NULL,'admin','Administrator',1) ON DUPLICATE KEY UPDATE `id`=`id`

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:151
[0m[33m[0.123ms] [34;1m[rows:1][0m INSERT INTO `user_roles` (`user_id`,`role_id`) VALUES (5,1) ON DUPLICATE KEY UPDATE `user_id`=`user_id`

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:151
[0m[33m[0.896ms] [34;1m[rows:1][0m UPDATE `users` SET `updated_at`='2026-02-03 22:15:11.834' WHERE `users`.`deleted_at` IS NULL AND `id` = 5

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:150
[0m[33m[0.234ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE username = 'å‡ºçº³' AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:151
[0m[33m[0.190ms] [34;1m[rows:0][0m INSERT INTO `roles` (`created_at`,`updated_at`,`deleted_at`,`name`,`description`,`id`) VALUES ('2026-02-03 22:15:11.674','2026-02-03 22:15:11.674',NULL,'admin','Administrator',1) ON DUPLICATE KEY UPDATE `id`=`id`

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:151
[0m[33m[0.234ms] [34;1m[rows:1][0m INSERT INTO `user_roles` (`user_id`,`role_id`) VALUES (6,1) ON DUPLICATE KEY UPDATE `user_id`=`user_id`

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:151
[0m[33m[1.017ms] [34;1m[rows:1][0m UPDATE `users` SET `updated_at`='2026-02-03 22:15:11.836' WHERE `users`.`deleted_at` IS NULL AND `id` = 6

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:150
[0m[33m[0.181ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE username = 'æŠ€æœ¯éƒ¨ç»ç†' AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:151
[0m[33m[0.179ms] [34;1m[rows:0][0m INSERT INTO `roles` (`created_at`,`updated_at`,`deleted_at`,`name`,`description`,`id`) VALUES ('2026-02-03 22:15:11.674','2026-02-03 22:15:11.674',NULL,'admin','Administrator',1) ON DUPLICATE KEY UPDATE `id`=`id`

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:151
[0m[33m[0.128ms] [34;1m[rows:1][0m INSERT INTO `user_roles` (`user_id`,`role_id`) VALUES (7,1) ON DUPLICATE KEY UPDATE `user_id`=`user_id`

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:151
[0m[33m[1.114ms] [34;1m[rows:1][0m UPDATE `users` SET `updated_at`='2026-02-03 22:15:11.837' WHERE `users`.`deleted_at` IS NULL AND `id` = 7

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:150
[0m[33m[0.221ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE username = 'é”€å”®éƒ¨ç»ç†' AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:151
[0m[33m[0.159ms] [34;1m[rows:0][0m INSERT INTO `roles` (`created_at`,`updated_at`,`deleted_at`,`name`,`description`,`id`) VALUES ('2026-02-03 22:15:11.674','2026-02-03 22:15:11.674',NULL,'admin','Administrator',1) ON DUPLICATE KEY UPDATE `id`=`id`

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:151
[0m[33m[0.155ms] [34;1m[rows:1][0m INSERT INTO `user_roles` (`user_id`,`role_id`) VALUES (8,1) ON DUPLICATE KEY UPDATE `user_id`=`user_id`

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:151
[0m[33m[0.870ms] [34;1m[rows:1][0m UPDATE `users` SET `updated_at`='2026-02-03 22:15:11.838' WHERE `users`.`deleted_at` IS NULL AND `id` = 8

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:165
[0m[33m[0.943ms] [34;1m[rows:1][0m SELECT count(*) FROM `workflow_templates` WHERE name = 'Expense Reimbursement' AND `workflow_templates`.`deleted_at` IS NULL

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:197
[0m[33m[0.960ms] [34;1m[rows:3][0m INSERT INTO `process_nodes` (`created_at`,`updated_at`,`deleted_at`,`template_id`,`node_key`,`node_type`,`assignee_rule`,`condition_rule`,`next_node_key`) VALUES ('2026-02-03 22:15:11.84','2026-02-03 22:15:11.84',NULL,1,'start','Starter',(NULL),(NULL),'dept_approve'),('2026-02-03 22:15:11.84','2026-02-03 22:15:11.84',NULL,1,'dept_approve','Approver','{"type":"department_manager"}',(NULL),'gm_approve'),('2026-02-03 22:15:11.84','2026-02-03 22:15:11.84',NULL,1,'gm_approve','Approver','{"type":"position","value":"æ€»ç»ç†"}',(NULL),'') ON DUPLICATE KEY UPDATE `template_id`=VALUES(`template_id`)

2026/02/03 22:15:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:197
[0m[33m[1.650ms] [34;1m[rows:1][0m INSERT INTO `workflow_templates` (`created_at`,`updated_at`,`deleted_at`,`name`,`description`,`version`,`is_active`,`created_by`) VALUES ('2026-02-03 22:15:11.84','2026-02-03 22:15:11.84',NULL,'Expense Reimbursement','Default expense reimbursement workflow',1,true,1)
[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /healthz                  --> example.com/oa-workorder/internal/http.NewRouter.func1 (4 handlers)
[GIN-debug] POST   /api/v1/auth/slider/verify --> example.com/oa-workorder/internal/handler.(*AuthHandler).SliderVerify-fm (4 handlers)
[GIN-debug] POST   /api/v1/auth/login        --> example.com/oa-workorder/internal/handler.(*AuthHandler).Login-fm (4 handlers)
[GIN-debug] POST   /api/v1/auth/refresh      --> example.com/oa-workorder/internal/handler.(*AuthHandler).Refresh-fm (4 handlers)
[GIN-debug] POST   /api/v1/auth/logout       --> example.com/oa-workorder/internal/handler.(*AuthHandler).Logout-fm (4 handlers)
[GIN-debug] GET    /api/v1/users/me          --> example.com/oa-workorder/internal/handler.(*UserHandler).Me-fm (5 handlers)
[GIN-debug] GET    /api/v1/users             --> example.com/oa-workorder/internal/handler.(*UserHandler).List-fm (6 handlers)
[GIN-debug] POST   /api/v1/users             --> example.com/oa-workorder/internal/handler.(*UserHandler).Create-fm (6 handlers)
[GIN-debug] PATCH  /api/v1/users/:id         --> example.com/oa-workorder/internal/handler.(*UserHandler).Update-fm (6 handlers)
[GIN-debug] DELETE /api/v1/users/:id         --> example.com/oa-workorder/internal/handler.(*UserHandler).Delete-fm (6 handlers)
[GIN-debug] GET    /api/v1/departments       --> example.com/oa-workorder/internal/handler.(*DepartmentHandler).List-fm (5 handlers)
[GIN-debug] GET    /api/v1/departments/:id/users --> example.com/oa-workorder/internal/handler.(*DepartmentHandler).GetUsers-fm (6 handlers)
[GIN-debug] POST   /api/v1/departments       --> example.com/oa-workorder/internal/handler.(*DepartmentHandler).Create-fm (6 handlers)
[GIN-debug] PATCH  /api/v1/departments/:id   --> example.com/oa-workorder/internal/handler.(*DepartmentHandler).Update-fm (6 handlers)
[GIN-debug] DELETE /api/v1/departments/:id   --> example.com/oa-workorder/internal/handler.(*DepartmentHandler).Delete-fm (6 handlers)
[GIN-debug] GET    /api/v1/tickets           --> example.com/oa-workorder/internal/handler.(*TicketHandler).List-fm (6 handlers)
[GIN-debug] GET    /api/v1/tickets/:id       --> example.com/oa-workorder/internal/handler.(*TicketHandler).Get-fm (6 handlers)
[GIN-debug] POST   /api/v1/tickets           --> example.com/oa-workorder/internal/handler.(*TicketHandler).Create-fm (6 handlers)
[GIN-debug] PATCH  /api/v1/tickets/:id       --> example.com/oa-workorder/internal/handler.(*TicketHandler).Update-fm (6 handlers)
[GIN-debug] GET    /api/v1/forms             --> example.com/oa-workorder/internal/handler.(*FormHandler).List-fm (5 handlers)
[GIN-debug] POST   /api/v1/forms             --> example.com/oa-workorder/internal/handler.(*FormHandler).Create-fm (5 handlers)
[GIN-debug] GET    /api/v1/forms/:id         --> example.com/oa-workorder/internal/handler.(*FormHandler).Get-fm (5 handlers)
[GIN-debug] GET    /api/v1/workflows/templates --> example.com/oa-workorder/internal/handler.(*WorkflowHandler).ListTemplates-fm (5 handlers)
[GIN-debug] POST   /api/v1/workflows/templates --> example.com/oa-workorder/internal/handler.(*WorkflowHandler).CreateTemplate-fm (5 handlers)
[GIN-debug] GET    /api/v1/workflows/templates/:id --> example.com/oa-workorder/internal/handler.(*WorkflowHandler).GetTemplate-fm (5 handlers)
[GIN-debug] GET    /api/v1/reimbursements    --> example.com/oa-workorder/internal/handler.(*ReimbursementHandler).List-fm (5 handlers)
[GIN-debug] POST   /api/v1/reimbursements    --> example.com/oa-workorder/internal/handler.(*ReimbursementHandler).Create-fm (5 handlers)
[GIN-debug] GET    /api/v1/reimbursements/:id --> example.com/oa-workorder/internal/handler.(*ReimbursementHandler).Get-fm (5 handlers)
[GIN-debug] PATCH  /api/v1/reimbursements/:id --> example.com/oa-workorder/internal/handler.(*ReimbursementHandler).Update-fm (5 handlers)
[GIN-debug] POST   /api/v1/reimbursements/:id/submit --> example.com/oa-workorder/internal/handler.(*ReimbursementHandler).Submit-fm (5 handlers)
[GIN-debug] POST   /api/v1/reimbursements/:id/approve --> example.com/oa-workorder/internal/handler.(*ReimbursementHandler).Approve-fm (5 handlers)
[GIN-debug] POST   /api/v1/reimbursements/:id/reject --> example.com/oa-workorder/internal/handler.(*ReimbursementHandler).Reject-fm (5 handlers)
[GIN-debug] GET    /api/v1/reimbursements/:id/logs --> example.com/oa-workorder/internal/handler.(*ApprovalLogHandler).ListByReimbursement-fm (5 handlers)
[GIN-debug] POST   /open/v1/tickets          --> example.com/oa-workorder/internal/handler.(*OpenHandler).CreateTicket-fm (5 handlers)
[GIN-debug] GET    /public/v1/approvals      --> example.com/oa-workorder/internal/handler.(*TicketHandler).PublicList-fm (4 handlers)
2026/02/03 22:15:11 server listening on 127.0.0.1:18080
[GIN-debug] [WARNING] You trusted all proxies, this is NOT safe. We recommend you to set a value.
Please check https://github.com/gin-gonic/gin/blob/master/docs/doc.md#dont-trust-all-proxies for details.
[GIN-debug] Listening and serving HTTP on 127.0.0.1:18080
[GIN-debug] [ERROR] listen tcp 127.0.0.1:18080: bind: address already in use
2026/02/03 22:15:11 server stopped: listen tcp 127.0.0.1:18080: bind: address already in use
exit status 1
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       [GIN] 2026/02/03 - 22:17:02 | 204 |      41.667Âµs |       127.0.0.1 | OPTIONS  "/api/v1/users/me"

2026/02/03 22:17:02 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.566ms] [34;1m[rows:1][0m SELECT * FROM `user_roles` WHERE `user_roles`.`user_id` = 1

2026/02/03 22:17:02 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.357ms] [34;1m[rows:1][0m SELECT * FROM `roles` WHERE `roles`.`id` = 1 AND `roles`.`deleted_at` IS NULL

2026/02/03 22:17:02 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[2.380ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 1 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/03 - 22:17:02 | 200 |    2.925042ms |       127.0.0.1 | GET      "/api/v1/users/me"
[GIN] 2026/02/03 - 22:17:02 | 204 |       7.709Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/03 22:17:02 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.310ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:17:02 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.770ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/03 22:17:02 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.709ms] [34;1m[rows:3][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/03 - 22:17:02 | 200 |    3.153958ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/03 - 22:17:05 | 204 |      41.667Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments"

2026/02/03 22:17:05 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:27
[0m[33m[1.052ms] [34;1m[rows:8][0m SELECT * FROM `departments` WHERE `departments`.`deleted_at` IS NULL ORDER BY sort_order, id

2026/02/03 22:17:05 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.788ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 2 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 22:17:05 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.275ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 3 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 22:17:05 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.378ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 4 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 22:17:05 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.634ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 7 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 22:17:05 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.456ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 8 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/03 - 22:17:05 | 200 |    4.741375ms |       127.0.0.1 | GET      "/api/v1/departments"
[GIN] 2026/02/03 - 22:17:05 | 204 |         3.5Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/1/users"

2026/02/03 22:17:05 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.753ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:17:05 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.348ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '1' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:17:05 | 200 |    1.221625ms |       127.0.0.1 | GET      "/api/v1/departments/1/users"

2026/02/03 22:17:06 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.084ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:17:06 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.736ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '1' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:17:06 | 200 |    2.155709ms |       127.0.0.1 | GET      "/api/v1/departments/1/users"
[GIN] 2026/02/03 - 22:17:07 | 204 |       8.333Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/2/users"

2026/02/03 22:17:07 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.840ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:17:07 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.889ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '2' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:17:07 | 200 |    2.010875ms |       127.0.0.1 | GET      "/api/v1/departments/2/users"

2026/02/03 22:17:07 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.747ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:17:07 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[1.296ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '2' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:17:07 | 200 |     3.68025ms |       127.0.0.1 | GET      "/api/v1/departments/2/users"
[GIN] 2026/02/03 - 22:17:08 | 204 |       9.166Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/3/users"

2026/02/03 22:17:08 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.140ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:17:08 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.979ms] [34;1m[rows:3][0m SELECT * FROM `users` WHERE department_id = '3' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:17:08 | 200 |    2.553541ms |       127.0.0.1 | GET      "/api/v1/departments/3/users"
[GIN] 2026/02/03 - 22:17:08 | 204 |      12.041Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/4/users"

2026/02/03 22:17:08 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[2.734ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:17:08 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[1.480ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '4' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:17:08 | 200 |    4.733541ms |       127.0.0.1 | GET      "/api/v1/departments/4/users"

2026/02/03 22:17:09 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.757ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:17:09 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[1.755ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '4' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:17:09 | 200 |       4.061ms |       127.0.0.1 | GET      "/api/v1/departments/4/users"
[GIN] 2026/02/03 - 22:17:11 | 204 |       7.792Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/6/users"

2026/02/03 22:17:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.791ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:17:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[1.556ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE department_id = '6' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:17:11 | 200 |    4.012959ms |       127.0.0.1 | GET      "/api/v1/departments/6/users"
[GIN] 2026/02/03 - 22:17:11 | 204 |      69.709Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/7/users"

2026/02/03 22:17:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[2.250ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:17:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[1.979ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE department_id = '7' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:17:11 | 200 |    4.708916ms |       127.0.0.1 | GET      "/api/v1/departments/7/users"
[GIN] 2026/02/03 - 22:17:12 | 204 |        9.75Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/8/users"

2026/02/03 22:17:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[2.763ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:17:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[1.166ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE department_id = '8' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:17:12 | 200 |     4.32625ms |       127.0.0.1 | GET      "/api/v1/departments/8/users"

2026/02/03 22:17:13 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[2.251ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:17:13 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[1.137ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE department_id = '6' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:17:13 | 200 |    3.852958ms |       127.0.0.1 | GET      "/api/v1/departments/6/users"
[GIN] 2026/02/03 - 22:17:14 | 204 |      11.875Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/4/users"

2026/02/03 22:17:14 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.708ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:17:14 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.979ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '4' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:17:14 | 200 |    3.134541ms |       127.0.0.1 | GET      "/api/v1/departments/4/users"
[GIN] 2026/02/03 - 22:17:20 | 204 |      39.209Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/2/users"

2026/02/03 22:17:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.174ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:17:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.552ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '2' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:17:20 | 200 |    2.130375ms |       127.0.0.1 | GET      "/api/v1/departments/2/users"
[GIN] 2026/02/03 - 22:17:21 | 204 |      18.125Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/1/users"

2026/02/03 22:17:21 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[2.449ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:17:21 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[2.425ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '1' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:17:21 | 200 |    5.647417ms |       127.0.0.1 | GET      "/api/v1/departments/1/users"
[GIN] 2026/02/03 - 22:17:29 | 204 |      32.084Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/5/users"

2026/02/03 22:17:29 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[2.411ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:17:29 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[2.630ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '5' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:17:29 | 200 |    5.396792ms |       127.0.0.1 | GET      "/api/v1/departments/5/users"
[GIN] 2026/02/03 - 22:18:06 | 204 |     177.458Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/4/users"

2026/02/03 22:18:06 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[2.027ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:18:06 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[1.798ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '4' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:18:06 | 200 |    4.305416ms |       127.0.0.1 | GET      "/api/v1/departments/4/users"
[GIN] 2026/02/03 - 22:18:19 | 204 |       30.25Âµs |       127.0.0.1 | OPTIONS  "/api/v1/users/7"

2026/02/03 22:18:19 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.711ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:write') AND `users`.`deleted_at` IS NULL

2026/02/03 22:18:19 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:182
[0m[33m[3.383ms] [34;1m[rows:1][0m UPDATE `users` SET `department_id`=4,`email`='tech_mgr@company.com',`password_hash`='$argon2id$v=19$m=65536,t=3,p=2$+V6ZX++SmzfprbUsOn6puA$TtwNV8/wJC7VxhUhK/5b+cu9vZrTRQ39ySDB9r2fKfA',`password_plain`='123456',`position`='éƒ¨é—¨ç»ç†',`status`='active',`username`='æŠ€æœ¯éƒ¨ç»ç†',`updated_at`='2026-02-03 22:18:19.225' WHERE id = 7 AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:18:19 | 200 |  108.519083ms |       127.0.0.1 | PATCH    "/api/v1/users/7"
[GIN] 2026/02/03 - 22:18:19 | 204 |        2.25Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/4/users"

2026/02/03 22:18:19 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.564ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:18:19 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.300ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '4' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:18:19 | 200 |     939.333Âµs |       127.0.0.1 | GET      "/api/v1/departments/4/users"
[GIN] 2026/02/03 - 22:18:23 | 204 |      30.292Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/6/users"

2026/02/03 22:18:23 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.601ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:18:23 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[1.359ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE department_id = '6' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:18:23 | 200 |    3.294625ms |       127.0.0.1 | GET      "/api/v1/departments/6/users"
[GIN] 2026/02/03 - 22:18:24 | 204 |      13.458Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/7/users"

2026/02/03 22:18:24 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[3.088ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:18:24 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[1.224ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE department_id = '7' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:18:24 | 200 |    4.878708ms |       127.0.0.1 | GET      "/api/v1/departments/7/users"

2026/02/03 22:18:26 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.277ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:18:26 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.709ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE department_id = '6' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:18:26 | 200 |    2.300875ms |       127.0.0.1 | GET      "/api/v1/departments/6/users"
[GIN] 2026/02/03 - 22:18:51 | 204 |      40.792Âµs |       127.0.0.1 | OPTIONS  "/api/v1/users"

2026/02/03 22:18:51 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.698ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:write') AND `users`.`deleted_at` IS NULL

2026/02/03 22:18:51 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:118
[0m[33m[2.846ms] [34;1m[rows:1][0m INSERT INTO `users` (`created_at`,`updated_at`,`deleted_at`,`username`,`email`,`password_hash`,`password_plain`,`status`,`last_login_at`,`lock_until`,`failed_count`,`department_id`,`position`) VALUES ('2026-02-03 22:18:51.407','2026-02-03 22:18:51.407',NULL,'yg','yg@company.com','$argon2id$v=19$m=65536,t=3,p=2$J0UXUtRA/z+V6fhRMnQKAg$GYyZtyAdoAmZqiwiZiKOWWrhI5e8caCvQpIL80h9fz8','123456','active',NULL,NULL,0,6,'å‘˜å·¥')
[GIN] 2026/02/03 - 22:18:51 | 201 |  106.226833ms |       127.0.0.1 | POST     "/api/v1/users"
[GIN] 2026/02/03 - 22:18:51 | 204 |       7.791Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/6/users"

2026/02/03 22:18:51 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.687ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:18:51 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.277ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '6' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:18:51 | 200 |    1.038042ms |       127.0.0.1 | GET      "/api/v1/departments/6/users"
[GIN] 2026/02/03 - 22:18:56 | 204 |       38.25Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/4/users"

2026/02/03 22:18:56 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.627ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:18:56 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.893ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '4' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:18:56 | 200 |    2.868667ms |       127.0.0.1 | GET      "/api/v1/departments/4/users"
[GIN] 2026/02/03 - 22:19:00 | 204 |      12.792Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/6/users"

2026/02/03 22:19:00 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[2.172ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:19:00 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[1.227ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '6' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:19:00 | 200 |     4.91075ms |       127.0.0.1 | GET      "/api/v1/departments/6/users"
[GIN] 2026/02/03 - 22:19:05 | 204 |       36.25Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/2/users"

2026/02/03 22:19:05 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[2.336ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:19:05 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.930ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '2' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:19:05 | 200 |    3.764667ms |       127.0.0.1 | GET      "/api/v1/departments/2/users"
[GIN] 2026/02/03 - 22:19:06 | 204 |      12.916Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/3/users"

2026/02/03 22:19:06 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[2.036ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:19:06 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[1.883ms] [34;1m[rows:3][0m SELECT * FROM `users` WHERE department_id = '3' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:19:06 | 200 |    4.474125ms |       127.0.0.1 | GET      "/api/v1/departments/3/users"
[GIN] 2026/02/03 - 22:19:15 | 204 |      41.417Âµs |       127.0.0.1 | OPTIONS  "/api/v1/users/5"

2026/02/03 22:19:15 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.341ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:write') AND `users`.`deleted_at` IS NULL

2026/02/03 22:19:15 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:182
[0m[33m[3.579ms] [34;1m[rows:1][0m UPDATE `users` SET `department_id`=3,`email`='accountant@company.com',`password_hash`='$argon2id$v=19$m=65536,t=3,p=2$uxnHprS6Qvhn1AxiO3aMPg$mpTsXM5z+eRtA/xDWiVDHt3oStbzpriP1Is/Lzb6T9g',`password_plain`='123456',`position`='ä¼šè®¡',`status`='active',`username`='ä¼šè®¡',`updated_at`='2026-02-03 22:19:15.165' WHERE id = 5 AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:19:15 | 200 |    96.00425ms |       127.0.0.1 | PATCH    "/api/v1/users/5"
[GIN] 2026/02/03 - 22:19:15 | 204 |       2.167Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/3/users"

2026/02/03 22:19:15 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.580ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:19:15 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.310ms] [34;1m[rows:3][0m SELECT * FROM `users` WHERE department_id = '3' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:19:15 | 200 |     978.708Âµs |       127.0.0.1 | GET      "/api/v1/departments/3/users"
[GIN] 2026/02/03 - 22:19:20 | 204 |      41.541Âµs |       127.0.0.1 | OPTIONS  "/api/v1/users/6"

2026/02/03 22:19:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.186ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:write') AND `users`.`deleted_at` IS NULL

2026/02/03 22:19:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:182
[0m[33m[2.045ms] [34;1m[rows:1][0m UPDATE `users` SET `department_id`=3,`email`='cashier@company.com',`password_hash`='$argon2id$v=19$m=65536,t=3,p=2$vak29PTqDHs9lykYXToQhQ$uhklXJ1rl7lNxiUC9KO1cx56GhlaULChCUdv89hpNOA',`password_plain`='123456',`position`='å‡ºçº³',`status`='active',`username`='å‡ºçº³',`updated_at`='2026-02-03 22:19:20.319' WHERE id = 6 AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:19:20 | 200 |   91.468875ms |       127.0.0.1 | PATCH    "/api/v1/users/6"
[GIN] 2026/02/03 - 22:19:20 | 204 |       4.958Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/3/users"

2026/02/03 22:19:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.626ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:19:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.285ms] [34;1m[rows:3][0m SELECT * FROM `users` WHERE department_id = '3' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:19:20 | 200 |      980.25Âµs |       127.0.0.1 | GET      "/api/v1/departments/3/users"
[GIN] 2026/02/03 - 22:19:28 | 204 |      50.042Âµs |       127.0.0.1 | OPTIONS  "/api/v1/users/4"

2026/02/03 22:19:28 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.543ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:write') AND `users`.`deleted_at` IS NULL

2026/02/03 22:19:28 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:182
[0m[33m[2.339ms] [34;1m[rows:1][0m UPDATE `users` SET `department_id`=3,`email`='fin_mgr@company.com',`password_hash`='$argon2id$v=19$m=65536,t=3,p=2$NpV9tQ1AWU/fD6l+2q8y8w$o4l+uFkwe91wrQYVI613SzPpwVyuKVbsQhHn6VEFYuM',`password_plain`='123456',`position`='éƒ¨é—¨ç»ç†',`status`='active',`username`='è´¢åŠ¡éƒ¨ç»ç†',`updated_at`='2026-02-03 22:19:28.107' WHERE id = 4 AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:19:28 | 200 |   95.647375ms |       127.0.0.1 | PATCH    "/api/v1/users/4"
[GIN] 2026/02/03 - 22:19:28 | 204 |       2.542Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/3/users"

2026/02/03 22:19:28 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.682ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:19:28 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.447ms] [34;1m[rows:3][0m SELECT * FROM `users` WHERE department_id = '3' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:19:28 | 200 |    1.219125ms |       127.0.0.1 | GET      "/api/v1/departments/3/users"
[GIN] 2026/02/03 - 22:19:32 | 204 |      52.708Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/4/users"

2026/02/03 22:19:32 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.689ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:19:32 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.903ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '4' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:19:32 | 200 |      3.0975ms |       127.0.0.1 | GET      "/api/v1/departments/4/users"
[GIN] 2026/02/03 - 22:19:33 | 204 |       7.875Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/03 22:19:33 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.328ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:19:33 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.663ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/03 22:19:33 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.326ms] [34;1m[rows:3][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/03 - 22:19:33 | 200 |    2.731209ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/03 - 22:19:44 | 204 |      40.042Âµs |       127.0.0.1 | OPTIONS  "/api/v1/users/me"

2026/02/03 22:19:44 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.284ms] [34;1m[rows:1][0m SELECT * FROM `user_roles` WHERE `user_roles`.`user_id` = 1

2026/02/03 22:19:44 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.229ms] [34;1m[rows:1][0m SELECT * FROM `roles` WHERE `roles`.`id` = 1 AND `roles`.`deleted_at` IS NULL

2026/02/03 22:19:44 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[1.222ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 1 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/03 - 22:19:44 | 200 |    1.386667ms |       127.0.0.1 | GET      "/api/v1/users/me"
[GIN] 2026/02/03 - 22:19:44 | 204 |       6.958Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/03 22:19:44 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.687ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:19:44 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.158ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/03 22:19:44 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.265ms] [34;1m[rows:3][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/03 - 22:19:44 | 200 |    1.370959ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/03 - 22:20:13 | 204 |      38.542Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/03 22:20:13 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.040ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:write') AND `users`.`deleted_at` IS NULL

2026/02/03 22:20:13 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:50
[0m[33m[2.592ms] [34;1m[rows:1][0m INSERT INTO `tickets` (`created_at`,`updated_at`,`deleted_at`,`title`,`description`,`status`,`priority`,`created_by`,`assignee_id`,`type`,`amount`) VALUES ('2026-02-03 22:20:13.409','2026-02-03 22:20:13.409',NULL,'åŠžå…¬è´¹æŠ¥é”€','ç”³è¯·äººï¼šå¼ ä¸‰ï¼›æ‰€å±žéƒ¨é—¨ï¼šæŠ€æœ¯éƒ¨ï¼›ç”³è¯·ç†ç”±ï¼š202602032230','pending','medium',1,NULL,'expense',100)
[GIN] 2026/02/03 - 22:20:13 | 201 |    4.155125ms |       127.0.0.1 | POST     "/api/v1/tickets"

2026/02/03 22:20:13 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.885ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:20:13 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.286ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/03 22:20:13 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.532ms] [34;1m[rows:4][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/03 - 22:20:13 | 200 |    2.124083ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/03 - 22:20:15 | 204 |       9.458Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets/4"

2026/02/03 22:20:15 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.642ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:20:15 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[1.157ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = '4' AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/03 - 22:20:15 | 200 |    3.271875ms |       127.0.0.1 | GET      "/api/v1/tickets/4"

2026/02/03 22:20:16 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.451ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:write') AND `users`.`deleted_at` IS NULL

2026/02/03 22:20:16 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:164
[0m[33m[3.407ms] [34;1m[rows:1][0m UPDATE `tickets` SET `status`='pending',`updated_at`='2026-02-03 22:20:16.694' WHERE id = '4' AND `tickets`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:20:16 | 200 |    5.667959ms |       127.0.0.1 | PATCH    "/api/v1/tickets/4"

2026/02/03 22:20:16 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[2.385ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:20:16 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.946ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = '4' AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/03 - 22:20:16 | 200 |    3.809583ms |       127.0.0.1 | GET      "/api/v1/tickets/4"
[GIN] 2026/02/03 - 22:20:20 | 204 |      26.083Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/03 22:20:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.318ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:20:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.599ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/03 22:20:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.544ms] [34;1m[rows:4][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/03 - 22:20:20 | 200 |    2.866375ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/03 - 22:20:22 | 204 |      30.042Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets/5"

2026/02/03 22:20:22 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[2.556ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:20:22 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.741ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = '5' AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/03 - 22:20:22 | 200 |    3.737292ms |       127.0.0.1 | GET      "/api/v1/tickets/5"

2026/02/03 22:20:24 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[2.079ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:write') AND `users`.`deleted_at` IS NULL

2026/02/03 22:20:24 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:164
[0m[33m[6.590ms] [34;1m[rows:1][0m UPDATE `tickets` SET `status`='approved',`updated_at`='2026-02-03 22:20:24.346' WHERE id = '5' AND `tickets`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 22:20:24 | 200 |    9.424708ms |       127.0.0.1 | PATCH    "/api/v1/tickets/5"

2026/02/03 22:20:24 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.074ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/03 22:20:24 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.595ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = '5' AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/03 - 22:20:24 | 200 |    2.058291ms |       127.0.0.1 | GET      "/api/v1/tickets/5"

2026/02/03 22:20:32 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:124
[0m[33m[0.881ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE type = 'expense' AND `tickets`.`deleted_at` IS NULL

2026/02/03 22:20:32 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:125
[0m[33m[0.367ms] [34;1m[rows:4][0m SELECT * FROM `tickets` WHERE type = 'expense' AND `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/03 - 22:20:32 | 200 |    2.433542ms |       127.0.0.1 | GET      "/public/v1/approvals?type=expense"
[GIN] 2026/02/03 - 22:26:37 | 204 |      34.042Âµs |       127.0.0.1 | OPTIONS  "/api/v1/users/me"

2026/02/03 22:26:37 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.737ms] [34;1m[rows:1][0m SELECT * FROM `user_roles` WHERE `user_roles`.`user_id` = 1

2026/02/03 22:26:37 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[1.244ms] [34;1m[rows:1][0m SELECT * FROM `roles` WHERE `roles`.`id` = 1 AND `roles`.`deleted_at` IS NULL

2026/02/03 22:26:37 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[10.552ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 1 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/03 - 22:26:37 | 200 |    10.70825ms |       127.0.0.1 | GET      "/api/v1/users/me"
[GIN] 2026/02/04 - 08:41:05 | 204 |    3.264167ms |       127.0.0.1 | OPTIONS  "/api/v1/users/me"
[GIN] 2026/02/04 - 08:41:05 | 401 |    6.330291ms |       127.0.0.1 | GET      "/api/v1/users/me"
[GIN] 2026/02/04 - 08:41:05 | 204 |         3.5Âµs |       127.0.0.1 | OPTIONS  "/api/v1/auth/refresh"

2026/02/04 08:41:05 [31;1m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:154 [35;1mrecord not found
[0m[33m[145.227ms] [34;1m[rows:0][0m SELECT * FROM `refresh_tokens` WHERE (token_hash = '1cfe953c791f52a714f22e093711629d8a73d7ea1264168bcdd7de89d2820c38' AND revoked_at IS NULL AND expires_at > '2026-02-04 08:41:05.491') AND `refresh_tokens`.`deleted_at` IS NULL ORDER BY `refresh_tokens`.`id` LIMIT 1
[GIN] 2026/02/04 - 08:41:05 | 401 |  150.879208ms |       127.0.0.1 | POST     "/api/v1/auth/refresh"
[GIN] 2026/02/04 - 09:09:45 | 204 |    2.745583ms |       127.0.0.1 | OPTIONS  "/api/v1/auth/slider/verify"
[GIN] 2026/02/04 - 09:09:45 | 200 |    4.621917ms |       127.0.0.1 | POST     "/api/v1/auth/slider/verify"
[GIN] 2026/02/04 - 09:09:46 | 204 |      10.541Âµs |       127.0.0.1 | OPTIONS  "/api/v1/auth/login"

2026/02/04 09:09:46 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:48
[0m[33m[10.965ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE (username = 'admin' OR email = 'admin') AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 09:09:46 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:70
[0m[33m[11.878ms] [34;1m[rows:1][0m UPDATE `users` SET `created_at`='2026-02-01 11:10:23.756',`updated_at`='2026-02-04 09:09:46.535',`deleted_at`=NULL,`username`='admin',`email`='admin@example.com',`password_hash`='$argon2id$v=19$m=65536,t=3,p=2$omSgq0MkyfmGbKXfEq1vvg$cF9uSy5aRFo3QuxwOqhgBM+xVQOLE0sT+OE9ZEyNxN4',`password_plain`='',`status`='active',`last_login_at`='2026-02-03 21:26:33.05',`lock_until`=NULL,`failed_count`=1,`department_id`=NULL,`position`='' WHERE `users`.`deleted_at` IS NULL AND `id` = 1
[GIN] 2026/02/04 - 09:09:46 | 401 |   119.63275ms |       127.0.0.1 | POST     "/api/v1/auth/login"
[GIN] 2026/02/04 - 09:09:53 | 204 |      49.125Âµs |       127.0.0.1 | OPTIONS  "/api/v1/auth/login"

2026/02/04 09:09:53 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:48
[0m[33m[1.958ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE (username = 'admin' OR email = 'admin') AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 09:09:53 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:70
[0m[33m[2.339ms] [34;1m[rows:1][0m UPDATE `users` SET `created_at`='2026-02-01 11:10:23.756',`updated_at`='2026-02-04 09:09:53.725',`deleted_at`=NULL,`username`='admin',`email`='admin@example.com',`password_hash`='$argon2id$v=19$m=65536,t=3,p=2$omSgq0MkyfmGbKXfEq1vvg$cF9uSy5aRFo3QuxwOqhgBM+xVQOLE0sT+OE9ZEyNxN4',`password_plain`='',`status`='active',`last_login_at`='2026-02-03 21:26:33.05',`lock_until`=NULL,`failed_count`=2,`department_id`=NULL,`position`='' WHERE `users`.`deleted_at` IS NULL AND `id` = 1
[GIN] 2026/02/04 - 09:09:53 | 401 |  102.364875ms |       127.0.0.1 | POST     "/api/v1/auth/login"

2026/02/04 09:09:55 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:48
[0m[33m[2.521ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE (username = 'admin' OR email = 'admin') AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 09:09:55 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:70
[0m[33m[2.329ms] [34;1m[rows:1][0m UPDATE `users` SET `created_at`='2026-02-01 11:10:23.756',`updated_at`='2026-02-04 09:09:55.349',`deleted_at`=NULL,`username`='admin',`email`='admin@example.com',`password_hash`='$argon2id$v=19$m=65536,t=3,p=2$omSgq0MkyfmGbKXfEq1vvg$cF9uSy5aRFo3QuxwOqhgBM+xVQOLE0sT+OE9ZEyNxN4',`password_plain`='',`status`='active',`last_login_at`='2026-02-03 21:26:33.05',`lock_until`=NULL,`failed_count`=3,`department_id`=NULL,`position`='' WHERE `users`.`deleted_at` IS NULL AND `id` = 1
[GIN] 2026/02/04 - 09:09:55 | 401 |   95.736458ms |       127.0.0.1 | POST     "/api/v1/auth/login"
[GIN] 2026/02/04 - 09:11:02 | 204 |    1.230167ms |       127.0.0.1 | OPTIONS  "/api/v1/auth/login"

2026/02/04 09:11:02 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:48
[0m[33m[1.243ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE (username = 'admin' OR email = 'admin') AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 09:11:02 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:70
[0m[33m[3.106ms] [34;1m[rows:1][0m UPDATE `users` SET `created_at`='2026-02-01 11:10:23.756',`updated_at`='2026-02-04 09:11:02.18',`deleted_at`=NULL,`username`='admin',`email`='admin@example.com',`password_hash`='$argon2id$v=19$m=65536,t=3,p=2$omSgq0MkyfmGbKXfEq1vvg$cF9uSy5aRFo3QuxwOqhgBM+xVQOLE0sT+OE9ZEyNxN4',`password_plain`='',`status`='active',`last_login_at`='2026-02-03 21:26:33.05',`lock_until`=NULL,`failed_count`=4,`department_id`=NULL,`position`='' WHERE `users`.`deleted_at` IS NULL AND `id` = 1
[GIN] 2026/02/04 - 09:11:02 | 401 |  117.464291ms |       127.0.0.1 | POST     "/api/v1/auth/login"
[GIN] 2026/02/04 - 09:30:06 | 204 |      400.75Âµs |       127.0.0.1 | OPTIONS  "/api/v1/auth/login"
[GIN] 2026/02/04 - 09:30:06 | 401 |     644.542Âµs |       127.0.0.1 | POST     "/api/v1/auth/login"
[GIN] 2026/02/04 - 09:30:14 | 204 |    1.425166ms |       127.0.0.1 | OPTIONS  "/api/v1/auth/login"
[GIN] 2026/02/04 - 09:30:14 | 401 |         124Âµs |       127.0.0.1 | POST     "/api/v1/auth/login"
[GIN] 2026/02/04 - 09:30:30 | 204 |      22.167Âµs |       127.0.0.1 | OPTIONS  "/api/v1/auth/slider/verify"
[GIN] 2026/02/04 - 09:30:30 | 200 |      589.75Âµs |       127.0.0.1 | POST     "/api/v1/auth/slider/verify"
[GIN] 2026/02/04 - 09:30:31 | 204 |       7.042Âµs |       127.0.0.1 | OPTIONS  "/api/v1/auth/login"

2026/02/04 09:30:31 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:48
[0m[33m[16.713ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE (username = 'admin' OR email = 'admin') AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 09:30:31 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:79
[0m[33m[6.470ms] [34;1m[rows:1][0m UPDATE `users` SET `created_at`='2026-02-01 11:10:23.756',`updated_at`='2026-02-04 09:30:31.546',`deleted_at`=NULL,`username`='admin',`email`='admin@example.com',`password_hash`='$argon2id$v=19$m=65536,t=3,p=2$omSgq0MkyfmGbKXfEq1vvg$cF9uSy5aRFo3QuxwOqhgBM+xVQOLE0sT+OE9ZEyNxN4',`password_plain`='',`status`='active',`last_login_at`='2026-02-04 09:30:31.546',`lock_until`=NULL,`failed_count`=0,`department_id`=NULL,`position`='' WHERE `users`.`deleted_at` IS NULL AND `id` = 1

2026/02/04 09:30:31 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:93
[0m[33m[4.782ms] [34;1m[rows:1][0m INSERT INTO `refresh_tokens` (`created_at`,`updated_at`,`deleted_at`,`user_id`,`token_hash`,`expires_at`,`revoked_at`) VALUES ('2026-02-04 09:30:31.553','2026-02-04 09:30:31.553',NULL,1,'80e1f4fc56518ea097b1ea96d0025d20af51736b3e3ac5edccf51f72633230dd','2026-03-06 09:30:31.552',NULL)
[GIN] 2026/02/04 - 09:30:31 | 200 |    119.6855ms |       127.0.0.1 | POST     "/api/v1/auth/login"
[GIN] 2026/02/04 - 09:30:31 | 204 |       3.041Âµs |       127.0.0.1 | OPTIONS  "/api/v1/users/me"

2026/02/04 09:30:31 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.600ms] [34;1m[rows:1][0m SELECT * FROM `user_roles` WHERE `user_roles`.`user_id` = 1

2026/02/04 09:30:31 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.442ms] [34;1m[rows:1][0m SELECT * FROM `roles` WHERE `roles`.`id` = 1 AND `roles`.`deleted_at` IS NULL

2026/02/04 09:30:31 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[2.294ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 1 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/04 - 09:30:31 | 200 |    2.527042ms |       127.0.0.1 | GET      "/api/v1/users/me"
[GIN] 2026/02/04 - 09:30:39 | 204 |      30.417Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/04 09:30:39 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[6.577ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 09:30:39 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.484ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/04 09:30:39 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.757ms] [34;1m[rows:4][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/04 - 09:30:39 | 200 |    8.364542ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/04 - 09:30:42 | 204 |       8.125Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets/5"

2026/02/04 09:30:42 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.709ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 09:30:42 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.572ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = '5' AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/04 - 09:30:42 | 200 |    1.625625ms |       127.0.0.1 | GET      "/api/v1/tickets/5"

2026/02/04 09:30:44 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.299ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 09:30:44 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.242ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/04 09:30:44 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.350ms] [34;1m[rows:4][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/04 - 09:30:44 | 200 |    2.243333ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/04 - 09:30:46 | 204 |      25.709Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets/4"

2026/02/04 09:30:46 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.572ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 09:30:46 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.502ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = '4' AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/04 - 09:30:46 | 200 |       1.325ms |       127.0.0.1 | GET      "/api/v1/tickets/4"

2026/02/04 09:30:47 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.573ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:write') AND `users`.`deleted_at` IS NULL

2026/02/04 09:30:47 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:164
[0m[33m[3.497ms] [34;1m[rows:1][0m UPDATE `tickets` SET `status`='pending',`updated_at`='2026-02-04 09:30:47.642' WHERE id = '4' AND `tickets`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 09:30:47 | 200 |    6.998209ms |       127.0.0.1 | PATCH    "/api/v1/tickets/4"

2026/02/04 09:30:47 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.455ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 09:30:47 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.727ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = '4' AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/04 - 09:30:47 | 200 |     2.64675ms |       127.0.0.1 | GET      "/api/v1/tickets/4"
[GIN] 2026/02/04 - 10:48:06 | 204 |    2.820583ms |       127.0.0.1 | OPTIONS  "/api/v1/auth/logout"

2026/02/04 10:48:06 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:195
[0m[33m[63.504ms] [34;1m[rows:1][0m UPDATE `refresh_tokens` SET `revoked_at`='2026-02-04 10:48:06.509',`updated_at`='2026-02-04 10:48:06.553' WHERE token_hash = '80e1f4fc56518ea097b1ea96d0025d20af51736b3e3ac5edccf51f72633230dd' AND `refresh_tokens`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 10:48:06 | 200 |   70.139041ms |       127.0.0.1 | POST     "/api/v1/auth/logout"
[GIN] 2026/02/04 - 17:06:58 | 204 |    2.654666ms |       127.0.0.1 | OPTIONS  "/api/v1/auth/slider/verify"
[GIN] 2026/02/04 - 17:06:58 | 200 |    4.166333ms |       127.0.0.1 | POST     "/api/v1/auth/slider/verify"
[GIN] 2026/02/04 - 17:06:59 | 204 |      61.667Âµs |       127.0.0.1 | OPTIONS  "/api/v1/auth/login"

2026/02/04 17:06:59 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:48
[0m[33m[23.244ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE (username = 'admin' OR email = 'admin') AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 17:06:59 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:70
[0m[33m[9.113ms] [34;1m[rows:1][0m UPDATE `users` SET `created_at`='2026-02-01 11:10:23.756',`updated_at`='2026-02-04 17:06:59.4',`deleted_at`=NULL,`username`='admin',`email`='admin@example.com',`password_hash`='$argon2id$v=19$m=65536,t=3,p=2$omSgq0MkyfmGbKXfEq1vvg$cF9uSy5aRFo3QuxwOqhgBM+xVQOLE0sT+OE9ZEyNxN4',`password_plain`='',`status`='active',`last_login_at`='2026-02-04 09:30:31.546',`lock_until`=NULL,`failed_count`=1,`department_id`=NULL,`position`='' WHERE `users`.`deleted_at` IS NULL AND `id` = 1
[GIN] 2026/02/04 - 17:06:59 | 401 |     126.183ms |       127.0.0.1 | POST     "/api/v1/auth/login"
[GIN] 2026/02/04 - 17:07:07 | 204 |    1.813291ms |       127.0.0.1 | OPTIONS  "/api/v1/auth/login"

2026/02/04 17:07:07 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:48
[0m[33m[6.571ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE (username = 'admin' OR email = 'admin') AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 17:07:08 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:79
[0m[33m[3.261ms] [34;1m[rows:1][0m UPDATE `users` SET `created_at`='2026-02-01 11:10:23.756',`updated_at`='2026-02-04 17:07:08.095',`deleted_at`=NULL,`username`='admin',`email`='admin@example.com',`password_hash`='$argon2id$v=19$m=65536,t=3,p=2$omSgq0MkyfmGbKXfEq1vvg$cF9uSy5aRFo3QuxwOqhgBM+xVQOLE0sT+OE9ZEyNxN4',`password_plain`='',`status`='active',`last_login_at`='2026-02-04 17:07:08.095',`lock_until`=NULL,`failed_count`=0,`department_id`=NULL,`position`='' WHERE `users`.`deleted_at` IS NULL AND `id` = 1

2026/02/04 17:07:08 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:93
[0m[33m[4.286ms] [34;1m[rows:1][0m INSERT INTO `refresh_tokens` (`created_at`,`updated_at`,`deleted_at`,`user_id`,`token_hash`,`expires_at`,`revoked_at`) VALUES ('2026-02-04 17:07:08.099','2026-02-04 17:07:08.099',NULL,1,'eefd8971f0b1c1324aca3b8f1e17cbdc0b0e762a65bab0f8fd6850e35eca01dc','2026-03-06 17:07:08.098',NULL)
[GIN] 2026/02/04 - 17:07:08 | 200 |  116.573583ms |       127.0.0.1 | POST     "/api/v1/auth/login"
[GIN] 2026/02/04 - 17:07:08 | 204 |       2.333Âµs |       127.0.0.1 | OPTIONS  "/api/v1/users/me"

2026/02/04 17:07:08 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.459ms] [34;1m[rows:1][0m SELECT * FROM `user_roles` WHERE `user_roles`.`user_id` = 1

2026/02/04 17:07:08 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.417ms] [34;1m[rows:1][0m SELECT * FROM `roles` WHERE `roles`.`id` = 1 AND `roles`.`deleted_at` IS NULL

2026/02/04 17:07:08 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[2.310ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 1 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/04 - 17:07:08 | 200 |    2.524583ms |       127.0.0.1 | GET      "/api/v1/users/me"
[GIN] 2026/02/04 - 17:07:08 | 204 |       6.375Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/04 17:07:08 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[3.687ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 17:07:08 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[5.858ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/04 17:07:08 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.734ms] [34;1m[rows:4][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/04 - 17:07:08 | 200 |    11.39025ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/04 - 17:07:14 | 204 |       19.75Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments"

2026/02/04 17:07:14 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:27
[0m[33m[0.878ms] [34;1m[rows:8][0m SELECT * FROM `departments` WHERE `departments`.`deleted_at` IS NULL ORDER BY sort_order, id

2026/02/04 17:07:14 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.447ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 2 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 17:07:14 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.269ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 3 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 17:07:14 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.192ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 4 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 17:07:14 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.202ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 7 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 17:07:14 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.231ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 8 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/04 - 17:07:14 | 200 |       3.136ms |       127.0.0.1 | GET      "/api/v1/departments"
[GIN] 2026/02/04 - 17:07:14 | 204 |       4.583Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/1/users"

2026/02/04 17:07:14 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.809ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 17:07:14 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.495ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '1' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 17:07:14 | 200 |    1.531583ms |       127.0.0.1 | GET      "/api/v1/departments/1/users"
[GIN] 2026/02/04 - 17:07:16 | 204 |       6.667Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/2/users"

2026/02/04 17:07:16 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.089ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 17:07:16 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.515ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '2' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 17:07:16 | 200 |    1.764875ms |       127.0.0.1 | GET      "/api/v1/departments/2/users"
[GIN] 2026/02/04 - 17:07:16 | 204 |      36.125Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/3/users"

2026/02/04 17:07:16 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.632ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 17:07:16 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.957ms] [34;1m[rows:3][0m SELECT * FROM `users` WHERE department_id = '3' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 17:07:16 | 200 |    3.020458ms |       127.0.0.1 | GET      "/api/v1/departments/3/users"

2026/02/04 17:07:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[3.610ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 17:07:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[1.798ms] [34;1m[rows:3][0m SELECT * FROM `users` WHERE department_id = '3' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 17:07:17 | 200 |    6.913541ms |       127.0.0.1 | GET      "/api/v1/departments/3/users"
[GIN] 2026/02/04 - 17:07:17 | 204 |       8.958Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/4/users"

2026/02/04 17:07:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.876ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 17:07:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.662ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '4' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 17:07:17 | 200 |    1.791916ms |       127.0.0.1 | GET      "/api/v1/departments/4/users"
[GIN] 2026/02/04 - 17:07:19 | 204 |      19.875Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/6/users"

2026/02/04 17:07:19 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[5.090ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 17:07:19 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.778ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '6' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 17:07:19 | 200 |    6.524458ms |       127.0.0.1 | GET      "/api/v1/departments/6/users"
[GIN] 2026/02/04 - 17:07:20 | 204 |       9.667Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/7/users"

2026/02/04 17:07:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[2.053ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 17:07:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[2.914ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE department_id = '7' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 17:07:20 | 200 |    5.305958ms |       127.0.0.1 | GET      "/api/v1/departments/7/users"
[GIN] 2026/02/04 - 17:07:20 | 204 |      14.708Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/8/users"

2026/02/04 17:07:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[8.864ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 17:07:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.564ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE department_id = '8' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 17:07:20 | 200 |   10.189625ms |       127.0.0.1 | GET      "/api/v1/departments/8/users"

2026/02/04 17:07:21 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[6.173ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 17:07:21 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.466ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE department_id = '7' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 17:07:21 | 200 |      6.9675ms |       127.0.0.1 | GET      "/api/v1/departments/7/users"

2026/02/04 17:07:21 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.958ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 17:07:21 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.758ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '6' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 17:07:21 | 200 |    2.483875ms |       127.0.0.1 | GET      "/api/v1/departments/6/users"

2026/02/04 17:07:22 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[3.444ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 17:07:22 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[1.307ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '4' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 17:07:22 | 200 |    5.635417ms |       127.0.0.1 | GET      "/api/v1/departments/4/users"
[GIN] 2026/02/04 - 17:07:24 | 204 |      24.958Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/3/users"

2026/02/04 17:07:24 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.895ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 17:07:24 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.562ms] [34;1m[rows:3][0m SELECT * FROM `users` WHERE department_id = '3' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 17:07:24 | 200 |    1.857667ms |       127.0.0.1 | GET      "/api/v1/departments/3/users"
[GIN] 2026/02/04 - 17:07:24 | 204 |      12.459Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/2/users"

2026/02/04 17:07:24 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[2.928ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 17:07:24 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[1.969ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '2' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 17:07:24 | 200 |     5.42525ms |       127.0.0.1 | GET      "/api/v1/departments/2/users"
[GIN] 2026/02/04 - 17:07:26 | 204 |       22.25Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/1/users"

2026/02/04 17:07:26 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[2.547ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 17:07:26 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[2.638ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '1' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 17:07:26 | 200 |    6.147125ms |       127.0.0.1 | GET      "/api/v1/departments/1/users"

2026/02/04 17:07:27 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.807ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 17:07:27 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.485ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '2' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 17:07:27 | 200 |    1.595875ms |       127.0.0.1 | GET      "/api/v1/departments/2/users"

2026/02/04 17:07:28 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.927ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 17:07:28 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[1.213ms] [34;1m[rows:3][0m SELECT * FROM `users` WHERE department_id = '3' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 17:07:28 | 200 |        3.63ms |       127.0.0.1 | GET      "/api/v1/departments/3/users"
[GIN] 2026/02/04 - 18:43:12 | 204 |    7.399667ms |       127.0.0.1 | OPTIONS  "/api/v1/users/me"
[GIN] 2026/02/04 - 18:43:12 | 204 |    6.974458ms |       127.0.0.1 | OPTIONS  "/api/v1/tickets"
[GIN] 2026/02/04 - 18:43:12 | 401 |   24.685834ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/04 - 18:43:12 | 401 |   24.872667ms |       127.0.0.1 | GET      "/api/v1/users/me"
[GIN] 2026/02/04 - 18:43:12 | 204 |       7.041Âµs |       127.0.0.1 | OPTIONS  "/api/v1/auth/refresh"

2026/02/04 18:43:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:154 [33mSLOW SQL >= 200ms
[0m[31;1m[331.111ms] [33m[rows:1][35m SELECT * FROM `refresh_tokens` WHERE (token_hash = 'eefd8971f0b1c1324aca3b8f1e17cbdc0b0e762a65bab0f8fd6850e35eca01dc' AND revoked_at IS NULL AND expires_at > '2026-02-04 18:43:12.571') AND `refresh_tokens`.`deleted_at` IS NULL ORDER BY `refresh_tokens`.`id` LIMIT 1[0m

2026/02/04 18:43:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:161
[0m[33m[13.928ms] [34;1m[rows:1][0m UPDATE `refresh_tokens` SET `created_at`='2026-02-04 17:07:08.099',`updated_at`='2026-02-04 18:43:12.907',`deleted_at`=NULL,`user_id`=1,`token_hash`='eefd8971f0b1c1324aca3b8f1e17cbdc0b0e762a65bab0f8fd6850e35eca01dc',`expires_at`='2026-03-06 17:07:08.098',`revoked_at`='2026-02-04 18:43:12.905' WHERE `refresh_tokens`.`deleted_at` IS NULL AND `id` = 99

2026/02/04 18:43:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:174
[0m[33m[3.833ms] [34;1m[rows:1][0m INSERT INTO `refresh_tokens` (`created_at`,`updated_at`,`deleted_at`,`user_id`,`token_hash`,`expires_at`,`revoked_at`) VALUES ('2026-02-04 18:43:12.92','2026-02-04 18:43:12.92',NULL,1,'460ae85f2e107aa15e49ec594461792aeac28e2340f73fc7e1f045f8dbf5da52','2026-03-06 18:43:12.919',NULL)
[GIN] 2026/02/04 - 18:43:12 | 200 |  353.133667ms |       127.0.0.1 | POST     "/api/v1/auth/refresh"

2026/02/04 18:43:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.532ms] [34;1m[rows:1][0m SELECT * FROM `user_roles` WHERE `user_roles`.`user_id` = 1

2026/02/04 18:43:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[1.439ms] [34;1m[rows:1][0m SELECT * FROM `roles` WHERE `roles`.`id` = 1 AND `roles`.`deleted_at` IS NULL

2026/02/04 18:43:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[3.274ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 1 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/04 - 18:43:12 | 200 |    3.385541ms |       127.0.0.1 | GET      "/api/v1/users/me"

2026/02/04 18:43:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[8.071ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 18:43:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.489ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/04 18:43:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[1.760ms] [34;1m[rows:4][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/04 - 18:43:12 | 200 |   10.577792ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/04 - 20:20:49 | 204 |     4.01525ms |       127.0.0.1 | OPTIONS  "/api/v1/users/me"
[GIN] 2026/02/04 - 20:20:49 | 204 |         132Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"
[GIN] 2026/02/04 - 20:20:49 | 401 |     640.625Âµs |       127.0.0.1 | GET      "/api/v1/users/me"
[GIN] 2026/02/04 - 20:20:49 | 401 |       289.5Âµs |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/04 - 20:20:49 | 204 |      10.416Âµs |       127.0.0.1 | OPTIONS  "/api/v1/auth/refresh"

2026/02/04 20:20:49 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:154
[0m[33m[2.709ms] [34;1m[rows:1][0m SELECT * FROM `refresh_tokens` WHERE (token_hash = '460ae85f2e107aa15e49ec594461792aeac28e2340f73fc7e1f045f8dbf5da52' AND revoked_at IS NULL AND expires_at > '2026-02-04 20:20:49.865') AND `refresh_tokens`.`deleted_at` IS NULL ORDER BY `refresh_tokens`.`id` LIMIT 1

2026/02/04 20:20:49 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:161
[0m[33m[16.270ms] [34;1m[rows:1][0m UPDATE `refresh_tokens` SET `created_at`='2026-02-04 18:43:12.92',`updated_at`='2026-02-04 20:20:49.869',`deleted_at`=NULL,`user_id`=1,`token_hash`='460ae85f2e107aa15e49ec594461792aeac28e2340f73fc7e1f045f8dbf5da52',`expires_at`='2026-03-06 18:43:12.919',`revoked_at`='2026-02-04 20:20:49.868' WHERE `refresh_tokens`.`deleted_at` IS NULL AND `id` = 100

2026/02/04 20:20:49 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:174
[0m[33m[16.467ms] [34;1m[rows:1][0m INSERT INTO `refresh_tokens` (`created_at`,`updated_at`,`deleted_at`,`user_id`,`token_hash`,`expires_at`,`revoked_at`) VALUES ('2026-02-04 20:20:49.898','2026-02-04 20:20:49.898',NULL,1,'83c89925ac2d0c7f379ab3f78882c1ef488299c04ed572c18243d340e68a934b','2026-03-06 20:20:49.885',NULL)
[GIN] 2026/02/04 - 20:20:49 | 200 |   36.649708ms |       127.0.0.1 | POST     "/api/v1/auth/refresh"

2026/02/04 20:20:49 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.422ms] [34;1m[rows:1][0m SELECT * FROM `user_roles` WHERE `user_roles`.`user_id` = 1

2026/02/04 20:20:49 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[4.950ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 20:20:49 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[6.999ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/04 20:20:49 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.665ms] [34;1m[rows:4][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/04 - 20:20:49 | 200 |   13.070208ms |       127.0.0.1 | GET      "/api/v1/tickets"

2026/02/04 20:20:49 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[18.444ms] [34;1m[rows:1][0m SELECT * FROM `roles` WHERE `roles`.`id` = 1 AND `roles`.`deleted_at` IS NULL

2026/02/04 20:20:49 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[22.859ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 1 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/04 - 20:20:49 | 200 |   23.153791ms |       127.0.0.1 | GET      "/api/v1/users/me"
[GIN] 2026/02/04 - 20:27:11 | 204 |    2.416208ms |       127.0.0.1 | OPTIONS  "/api/v1/tickets/3"

2026/02/04 20:27:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[37.580ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 20:27:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[3.461ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = '3' AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/04 - 20:27:11 | 200 |   47.240041ms |       127.0.0.1 | GET      "/api/v1/tickets/3"
[GIN] 2026/02/04 - 20:27:22 | 204 |       71.25Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/04 20:27:22 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[2.108ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 20:27:22 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[4.102ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/04 20:27:22 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.755ms] [34;1m[rows:4][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/04 - 20:27:22 | 200 |        7.44ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/04 - 20:39:14 | 204 |      41.083Âµs |       127.0.0.1 | OPTIONS  "/api/v1/users/me"
[GIN] 2026/02/04 - 20:39:14 | 401 |     353.583Âµs |       127.0.0.1 | GET      "/api/v1/users/me"
[GIN] 2026/02/04 - 20:39:14 | 204 |       7.208Âµs |       127.0.0.1 | OPTIONS  "/api/v1/auth/refresh"
[GIN] 2026/02/04 - 20:39:14 | 204 |       609.5Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"
[GIN] 2026/02/04 - 20:39:14 | 401 |      40.708Âµs |       127.0.0.1 | GET      "/api/v1/tickets"

2026/02/04 20:39:14 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:154
[0m[33m[36.112ms] [34;1m[rows:1][0m SELECT * FROM `refresh_tokens` WHERE (token_hash = '83c89925ac2d0c7f379ab3f78882c1ef488299c04ed572c18243d340e68a934b' AND revoked_at IS NULL AND expires_at > '2026-02-04 20:39:14.483') AND `refresh_tokens`.`deleted_at` IS NULL ORDER BY `refresh_tokens`.`id` LIMIT 1

2026/02/04 20:39:14 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:161
[0m[33m[10.591ms] [34;1m[rows:1][0m UPDATE `refresh_tokens` SET `created_at`='2026-02-04 20:20:49.898',`updated_at`='2026-02-04 20:39:14.522',`deleted_at`=NULL,`user_id`=1,`token_hash`='83c89925ac2d0c7f379ab3f78882c1ef488299c04ed572c18243d340e68a934b',`expires_at`='2026-03-06 20:20:49.885',`revoked_at`='2026-02-04 20:39:14.52' WHERE `refresh_tokens`.`deleted_at` IS NULL AND `id` = 101

2026/02/04 20:39:14 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:174
[0m[33m[3.473ms] [34;1m[rows:1][0m INSERT INTO `refresh_tokens` (`created_at`,`updated_at`,`deleted_at`,`user_id`,`token_hash`,`expires_at`,`revoked_at`) VALUES ('2026-02-04 20:39:14.531','2026-02-04 20:39:14.531',NULL,1,'0e2621b040c87fd3aeed936dc1fc9443569ddd775963df69bb985e2ee28455ac','2026-03-06 20:39:14.531',NULL)
[GIN] 2026/02/04 - 20:39:14 | 200 |   53.620417ms |       127.0.0.1 | POST     "/api/v1/auth/refresh"

2026/02/04 20:39:14 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.455ms] [34;1m[rows:1][0m SELECT * FROM `user_roles` WHERE `user_roles`.`user_id` = 1

2026/02/04 20:39:14 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.360ms] [34;1m[rows:1][0m SELECT * FROM `roles` WHERE `roles`.`id` = 1 AND `roles`.`deleted_at` IS NULL

2026/02/04 20:39:14 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[5.181ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 1 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/04 - 20:39:14 | 200 |    5.516125ms |       127.0.0.1 | GET      "/api/v1/users/me"

2026/02/04 20:39:14 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[5.475ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 20:39:14 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.732ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/04 20:39:14 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[1.757ms] [34;1m[rows:4][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/04 - 20:39:14 | 200 |    8.258542ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/04 - 20:41:42 | 204 |       62.75Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/04 20:41:42 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[7.426ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 20:41:42 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.727ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/04 20:41:42 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[6.386ms] [34;1m[rows:4][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/04 - 20:41:42 | 200 |   15.102791ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/04 - 21:02:12 | 204 |    2.846208ms |       127.0.0.1 | OPTIONS  "/api/v1/departments"
[GIN] 2026/02/04 - 21:02:12 | 401 |      3.3905ms |       127.0.0.1 | GET      "/api/v1/departments"
[GIN] 2026/02/04 - 21:02:12 | 204 |       4.541Âµs |       127.0.0.1 | OPTIONS  "/api/v1/auth/refresh"

2026/02/04 21:02:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:154
[0m[33m[26.794ms] [34;1m[rows:1][0m SELECT * FROM `refresh_tokens` WHERE (token_hash = '0e2621b040c87fd3aeed936dc1fc9443569ddd775963df69bb985e2ee28455ac' AND revoked_at IS NULL AND expires_at > '2026-02-04 21:02:12.04') AND `refresh_tokens`.`deleted_at` IS NULL ORDER BY `refresh_tokens`.`id` LIMIT 1

2026/02/04 21:02:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:161
[0m[33m[6.983ms] [34;1m[rows:1][0m UPDATE `refresh_tokens` SET `created_at`='2026-02-04 20:39:14.531',`updated_at`='2026-02-04 21:02:12.071',`deleted_at`=NULL,`user_id`=1,`token_hash`='0e2621b040c87fd3aeed936dc1fc9443569ddd775963df69bb985e2ee28455ac',`expires_at`='2026-03-06 20:39:14.531',`revoked_at`='2026-02-04 21:02:12.068' WHERE `refresh_tokens`.`deleted_at` IS NULL AND `id` = 102

2026/02/04 21:02:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:174
[0m[33m[1.052ms] [34;1m[rows:1][0m INSERT INTO `refresh_tokens` (`created_at`,`updated_at`,`deleted_at`,`user_id`,`token_hash`,`expires_at`,`revoked_at`) VALUES ('2026-02-04 21:02:12.076','2026-02-04 21:02:12.076',NULL,1,'8415b1e85da52be21920cef56b6f9719b7f23e3f1662bf26397c545c12e96438','2026-03-06 21:02:12.076',NULL)
[GIN] 2026/02/04 - 21:02:12 | 200 |   37.129875ms |       127.0.0.1 | POST     "/api/v1/auth/refresh"

2026/02/04 21:02:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:27
[0m[33m[1.316ms] [34;1m[rows:8][0m SELECT * FROM `departments` WHERE `departments`.`deleted_at` IS NULL ORDER BY sort_order, id

2026/02/04 21:02:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.644ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 2 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 21:02:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.245ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 3 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 21:02:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.170ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 4 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 21:02:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.153ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 7 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 21:02:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.162ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 8 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/04 - 21:02:12 | 200 |      3.1605ms |       127.0.0.1 | GET      "/api/v1/departments"
[GIN] 2026/02/04 - 21:02:12 | 204 |       8.916Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/1/users"

2026/02/04 21:02:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[4.614ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:02:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.553ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '1' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 21:02:12 | 200 |     5.54575ms |       127.0.0.1 | GET      "/api/v1/departments/1/users"
[GIN] 2026/02/04 - 21:02:34 | 204 |      96.375Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/04 21:02:34 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.161ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:02:34 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.292ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/04 21:02:34 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[1.512ms] [34;1m[rows:4][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/04 - 21:02:34 | 200 |    3.681666ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/04 - 21:02:38 | 204 |      11.166Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets/2"

2026/02/04 21:02:38 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.150ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:02:38 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.554ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = '2' AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/04 - 21:02:38 | 200 |    2.024375ms |       127.0.0.1 | GET      "/api/v1/tickets/2"
[GIN] 2026/02/04 - 21:02:41 | 204 |      46.084Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/04 21:02:41 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.805ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:02:41 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.508ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/04 21:02:41 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.457ms] [34;1m[rows:4][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/04 - 21:02:41 | 200 |    2.152167ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/04 - 21:04:43 | 204 |       47.25Âµs |       127.0.0.1 | OPTIONS  "/api/v1/users/me"

2026/02/04 21:04:43 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.418ms] [34;1m[rows:1][0m SELECT * FROM `user_roles` WHERE `user_roles`.`user_id` = 1

2026/02/04 21:04:43 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.563ms] [34;1m[rows:1][0m SELECT * FROM `roles` WHERE `roles`.`id` = 1 AND `roles`.`deleted_at` IS NULL

2026/02/04 21:04:43 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[2.374ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 1 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/04 - 21:04:43 | 200 |     4.13525ms |       127.0.0.1 | GET      "/api/v1/users/me"
[GIN] 2026/02/04 - 21:04:43 | 204 |        7.75Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/04 21:04:43 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.992ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:04:43 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.506ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/04 21:04:43 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.521ms] [34;1m[rows:2][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/04 - 21:04:43 | 200 |    4.465875ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/04 - 21:07:20 | 204 |      51.041Âµs |       127.0.0.1 | OPTIONS  "/api/v1/users/me"

2026/02/04 21:07:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.799ms] [34;1m[rows:1][0m SELECT * FROM `user_roles` WHERE `user_roles`.`user_id` = 1

2026/02/04 21:07:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.541ms] [34;1m[rows:1][0m SELECT * FROM `roles` WHERE `roles`.`id` = 1 AND `roles`.`deleted_at` IS NULL

2026/02/04 21:07:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[8.564ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 1 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/04 - 21:07:20 | 200 |    8.879334ms |       127.0.0.1 | GET      "/api/v1/users/me"
[GIN] 2026/02/04 - 21:07:20 | 204 |       6.917Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/04 21:07:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.829ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:07:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.287ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/04 21:07:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.703ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/04 - 21:07:20 | 200 |    2.146958ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/04 - 21:07:30 | 204 |       29.25Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets/4"

2026/02/04 21:07:30 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.699ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:07:30 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.883ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = '4' AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/04 - 21:07:30 | 200 |     3.01775ms |       127.0.0.1 | GET      "/api/v1/tickets/4"
[GIN] 2026/02/04 - 21:15:22 | 204 |     124.791Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/04 21:15:22 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[7.497ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:15:22 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.390ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/04 21:15:22 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.391ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/04 - 21:15:22 | 200 |     9.06675ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/04 - 21:18:52 | 204 |      42.833Âµs |       127.0.0.1 | OPTIONS  "/api/v1/users/me"

2026/02/04 21:18:52 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.515ms] [34;1m[rows:1][0m SELECT * FROM `user_roles` WHERE `user_roles`.`user_id` = 1

2026/02/04 21:18:52 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.549ms] [34;1m[rows:1][0m SELECT * FROM `roles` WHERE `roles`.`id` = 1 AND `roles`.`deleted_at` IS NULL

2026/02/04 21:18:52 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[2.073ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 1 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/04 - 21:18:52 | 200 |    2.415459ms |       127.0.0.1 | GET      "/api/v1/users/me"
[GIN] 2026/02/04 - 21:18:52 | 204 |       9.792Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/04 21:18:52 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.216ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:18:52 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.260ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/04 21:18:52 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.476ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/04 - 21:18:52 | 200 |    2.485875ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/04 - 21:20:40 | 204 |      26.959Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets/1"
[GIN] 2026/02/04 - 21:20:40 | 401 |      79.084Âµs |       127.0.0.1 | GET      "/api/v1/tickets/1"
[GIN] 2026/02/04 - 21:20:40 | 204 |       6.125Âµs |       127.0.0.1 | OPTIONS  "/api/v1/auth/refresh"

2026/02/04 21:20:40 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:154
[0m[33m[27.684ms] [34;1m[rows:1][0m SELECT * FROM `refresh_tokens` WHERE (token_hash = '8415b1e85da52be21920cef56b6f9719b7f23e3f1662bf26397c545c12e96438' AND revoked_at IS NULL AND expires_at > '2026-02-04 21:20:40.453') AND `refresh_tokens`.`deleted_at` IS NULL ORDER BY `refresh_tokens`.`id` LIMIT 1

2026/02/04 21:20:40 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:161
[0m[33m[9.909ms] [34;1m[rows:1][0m UPDATE `refresh_tokens` SET `created_at`='2026-02-04 21:02:12.076',`updated_at`='2026-02-04 21:20:40.482',`deleted_at`=NULL,`user_id`=1,`token_hash`='8415b1e85da52be21920cef56b6f9719b7f23e3f1662bf26397c545c12e96438',`expires_at`='2026-03-06 21:02:12.076',`revoked_at`='2026-02-04 21:20:40.481' WHERE `refresh_tokens`.`deleted_at` IS NULL AND `id` = 103

2026/02/04 21:20:40 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:174
[0m[33m[0.737ms] [34;1m[rows:1][0m INSERT INTO `refresh_tokens` (`created_at`,`updated_at`,`deleted_at`,`user_id`,`token_hash`,`expires_at`,`revoked_at`) VALUES ('2026-02-04 21:20:40.492','2026-02-04 21:20:40.492',NULL,1,'bd85aa6be23bda43f10fe349f46c29fce1c81e67c50034cc1d9436eb6de2d9b7','2026-03-06 21:20:40.491',NULL)
[GIN] 2026/02/04 - 21:20:40 | 200 |   38.751416ms |       127.0.0.1 | POST     "/api/v1/auth/refresh"

2026/02/04 21:20:40 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.674ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:20:40 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.234ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = '1' AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/04 - 21:20:40 | 200 |    1.083709ms |       127.0.0.1 | GET      "/api/v1/tickets/1"
[GIN] 2026/02/04 - 21:20:42 | 204 |       9.625Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/04 21:20:42 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.274ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:20:42 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.657ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/04 21:20:42 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.824ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/04 - 21:20:42 | 200 |    3.410208ms |       127.0.0.1 | GET      "/api/v1/tickets"

2026/02/04 21:20:43 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.599ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:20:43 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.408ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = '1' AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/04 - 21:20:43 | 200 |    1.377292ms |       127.0.0.1 | GET      "/api/v1/tickets/1"

2026/02/04 21:20:45 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.780ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:20:45 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.164ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/04 21:20:45 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.402ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/04 - 21:20:45 | 200 |    3.184167ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/04 - 21:22:30 | 204 |      37.209Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments"

2026/02/04 21:22:30 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:27
[0m[33m[2.039ms] [34;1m[rows:8][0m SELECT * FROM `departments` WHERE `departments`.`deleted_at` IS NULL ORDER BY sort_order, id

2026/02/04 21:22:30 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.600ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 2 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 21:22:30 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.819ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 3 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 21:22:30 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.412ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 4 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 21:22:30 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.232ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 7 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 21:22:30 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.422ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 8 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/04 - 21:22:30 | 200 |    5.241417ms |       127.0.0.1 | GET      "/api/v1/departments"
[GIN] 2026/02/04 - 21:22:30 | 204 |       7.292Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/1/users"

2026/02/04 21:22:30 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[2.112ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:22:30 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[1.003ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '1' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 21:22:30 | 200 |    3.332875ms |       127.0.0.1 | GET      "/api/v1/departments/1/users"
[GIN] 2026/02/04 - 21:22:32 | 204 |      11.875Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/2/users"

2026/02/04 21:22:32 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.744ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:22:32 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[1.040ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '2' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 21:22:32 | 200 |    3.175792ms |       127.0.0.1 | GET      "/api/v1/departments/2/users"
[GIN] 2026/02/04 - 21:22:40 | 204 |       37.25Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/3/users"

2026/02/04 21:22:40 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[2.174ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:22:40 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[1.711ms] [34;1m[rows:3][0m SELECT * FROM `users` WHERE department_id = '3' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 21:22:40 | 200 |    4.447875ms |       127.0.0.1 | GET      "/api/v1/departments/3/users"

2026/02/04 21:33:26 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:124
[0m[33m[3.067ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE type = 'expense' AND `tickets`.`deleted_at` IS NULL

2026/02/04 21:33:26 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:125
[0m[33m[0.608ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE type = 'expense' AND `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/04 - 21:33:26 | 200 |    4.322292ms |       127.0.0.1 | GET      "/public/v1/approvals?type=expense"
[GIN] 2026/02/04 - 21:40:00 | 204 |      72.167Âµs |       127.0.0.1 | OPTIONS  "/api/v1/auth/logout"

2026/02/04 21:40:00 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:195
[0m[33m[6.803ms] [34;1m[rows:1][0m UPDATE `refresh_tokens` SET `revoked_at`='2026-02-04 21:40:00.756',`updated_at`='2026-02-04 21:40:00.757' WHERE token_hash = 'bd85aa6be23bda43f10fe349f46c29fce1c81e67c50034cc1d9436eb6de2d9b7' AND `refresh_tokens`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 21:40:00 | 200 |     7.16325ms |       127.0.0.1 | POST     "/api/v1/auth/logout"
[GIN] 2026/02/04 - 21:40:07 | 204 |     133.125Âµs |       127.0.0.1 | OPTIONS  "/api/v1/auth/slider/verify"
[GIN] 2026/02/04 - 21:40:07 | 200 |     1.24075ms |       127.0.0.1 | POST     "/api/v1/auth/slider/verify"
[GIN] 2026/02/04 - 21:40:07 | 204 |      13.875Âµs |       127.0.0.1 | OPTIONS  "/api/v1/auth/login"

2026/02/04 21:40:07 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:48
[0m[33m[2.428ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE (username = 'ä¼šè®¡' OR email = 'ä¼šè®¡') AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 21:40:07 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:79
[0m[33m[5.302ms] [34;1m[rows:1][0m UPDATE `users` SET `created_at`='2026-02-01 13:41:21.532',`updated_at`='2026-02-04 21:40:07.894',`deleted_at`=NULL,`username`='ä¼šè®¡',`email`='accountant@company.com',`password_hash`='$argon2id$v=19$m=65536,t=3,p=2$uxnHprS6Qvhn1AxiO3aMPg$mpTsXM5z+eRtA/xDWiVDHt3oStbzpriP1Is/Lzb6T9g',`password_plain`='123456',`status`='active',`last_login_at`='2026-02-04 21:40:07.893',`lock_until`=NULL,`failed_count`=0,`department_id`=3,`position`='ä¼šè®¡' WHERE `users`.`deleted_at` IS NULL AND `id` = 5

2026/02/04 21:40:07 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:93
[0m[33m[2.044ms] [34;1m[rows:1][0m INSERT INTO `refresh_tokens` (`created_at`,`updated_at`,`deleted_at`,`user_id`,`token_hash`,`expires_at`,`revoked_at`) VALUES ('2026-02-04 21:40:07.899','2026-02-04 21:40:07.899',NULL,5,'afca2dff3c86724e807b2413dd62698771d758d7447a14a322ddb8cf62281c4f','2026-03-06 21:40:07.898',NULL)
[GIN] 2026/02/04 - 21:40:07 | 200 |  108.992416ms |       127.0.0.1 | POST     "/api/v1/auth/login"
[GIN] 2026/02/04 - 21:40:07 | 204 |       2.542Âµs |       127.0.0.1 | OPTIONS  "/api/v1/users/me"

2026/02/04 21:40:07 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.327ms] [34;1m[rows:1][0m SELECT * FROM `user_roles` WHERE `user_roles`.`user_id` = 5

2026/02/04 21:40:07 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.312ms] [34;1m[rows:1][0m SELECT * FROM `roles` WHERE `roles`.`id` = 1 AND `roles`.`deleted_at` IS NULL

2026/02/04 21:40:07 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[1.368ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 5 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/04 - 21:40:07 | 200 |    1.418042ms |       127.0.0.1 | GET      "/api/v1/users/me"
[GIN] 2026/02/04 - 21:40:07 | 204 |       4.667Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/04 21:40:07 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[15.572ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 5 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:40:07 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.284ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/04 21:40:07 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.305ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/04 - 21:40:07 | 200 |    16.36975ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/04 - 21:40:09 | 204 |      23.334Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments"

2026/02/04 21:40:09 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:27
[0m[33m[0.754ms] [34;1m[rows:8][0m SELECT * FROM `departments` WHERE `departments`.`deleted_at` IS NULL ORDER BY sort_order, id

2026/02/04 21:40:09 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.532ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 2 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 21:40:09 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.289ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 3 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 21:40:09 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.184ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 4 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 21:40:09 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.187ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 7 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 21:40:09 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.185ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 8 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/04 - 21:40:09 | 200 |       2.668ms |       127.0.0.1 | GET      "/api/v1/departments"
[GIN] 2026/02/04 - 21:40:09 | 204 |       7.208Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/1/users"

2026/02/04 21:40:09 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.876ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 5 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:40:09 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.560ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '1' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 21:40:09 | 200 |    2.930708ms |       127.0.0.1 | GET      "/api/v1/departments/1/users"
[GIN] 2026/02/04 - 21:40:12 | 204 |       9.875Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/3/users"

2026/02/04 21:40:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.086ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 5 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:40:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.748ms] [34;1m[rows:3][0m SELECT * FROM `users` WHERE department_id = '3' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 21:40:12 | 200 |    2.134208ms |       127.0.0.1 | GET      "/api/v1/departments/3/users"
[GIN] 2026/02/04 - 21:40:17 | 204 |      38.666Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/4/users"

2026/02/04 21:40:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[2.131ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 5 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:40:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[1.129ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '4' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 21:40:17 | 200 |    3.728333ms |       127.0.0.1 | GET      "/api/v1/departments/4/users"
[GIN] 2026/02/04 - 21:40:18 | 204 |     132.958Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/6/users"

2026/02/04 21:40:18 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.536ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 5 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:40:18 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[2.464ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '6' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 21:40:18 | 200 |    4.547292ms |       127.0.0.1 | GET      "/api/v1/departments/6/users"

2026/02/04 21:40:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[2.556ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 5 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:40:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[1.003ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '4' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 21:40:20 | 200 |       4.203ms |       127.0.0.1 | GET      "/api/v1/departments/4/users"

2026/02/04 21:40:21 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[2.221ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 5 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:40:21 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[2.948ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '6' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 21:40:21 | 200 |    5.607084ms |       127.0.0.1 | GET      "/api/v1/departments/6/users"
[GIN] 2026/02/04 - 21:40:24 | 204 |      12.334Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/7/users"

2026/02/04 21:40:24 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[3.039ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 5 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:40:24 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.943ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE department_id = '7' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 21:40:24 | 200 |    4.468833ms |       127.0.0.1 | GET      "/api/v1/departments/7/users"
[GIN] 2026/02/04 - 21:40:26 | 204 |      36.833Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/8/users"

2026/02/04 21:40:26 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.200ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 5 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:40:26 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.492ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE department_id = '8' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 21:40:26 | 200 |    1.949625ms |       127.0.0.1 | GET      "/api/v1/departments/8/users"
[GIN] 2026/02/04 - 21:40:27 | 204 |      12.834Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/5/users"

2026/02/04 21:40:27 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.372ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 5 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:40:27 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.963ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '5' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 21:40:27 | 200 |    3.541959ms |       127.0.0.1 | GET      "/api/v1/departments/5/users"
[GIN] 2026/02/04 - 21:40:33 | 204 |      55.292Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/04 21:40:33 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.926ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 5 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:40:33 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.286ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/04 21:40:33 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.389ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/04 - 21:40:33 | 200 |    1.936375ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/04 - 21:40:35 | 204 |      20.375Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments"

2026/02/04 21:40:35 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:27
[0m[33m[0.684ms] [34;1m[rows:8][0m SELECT * FROM `departments` WHERE `departments`.`deleted_at` IS NULL ORDER BY sort_order, id

2026/02/04 21:40:35 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.370ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 2 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 21:40:35 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.337ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 3 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 21:40:35 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.330ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 4 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 21:40:35 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.267ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 7 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/04 21:40:35 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.220ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 8 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/04 - 21:40:35 | 200 |    2.671917ms |       127.0.0.1 | GET      "/api/v1/departments"
[GIN] 2026/02/04 - 21:40:35 | 204 |       7.167Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/1/users"

2026/02/04 21:40:35 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.638ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 5 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:40:35 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.464ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '1' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/04 - 21:40:35 | 200 |    1.310667ms |       127.0.0.1 | GET      "/api/v1/departments/1/users"
[GIN] 2026/02/04 - 21:48:48 | 204 |      41.375Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/04 21:48:48 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[15.908ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 5 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:48:48 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[6.057ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/04 21:48:48 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.516ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/04 - 21:48:48 | 200 |   22.994875ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/04 - 21:49:06 | 204 |      23.458Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/04 21:49:06 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.765ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 5 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:49:06 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.641ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/04 21:49:06 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.387ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/04 - 21:49:06 | 200 |     3.18325ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/04 - 21:52:38 | 204 |      52.958Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/04 21:52:38 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.968ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 5 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 21:52:38 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.216ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/04 21:52:38 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.235ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/04 - 21:52:38 | 200 |       1.804ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/04 - 22:31:06 | 204 |    2.695875ms |       127.0.0.1 | OPTIONS  "/api/v1/tickets"
[GIN] 2026/02/04 - 22:31:06 | 204 |    3.022542ms |       127.0.0.1 | OPTIONS  "/api/v1/users/me"
[GIN] 2026/02/04 - 22:31:06 | 401 |    3.398625ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/04 - 22:31:06 | 401 |    3.900666ms |       127.0.0.1 | GET      "/api/v1/users/me"
[GIN] 2026/02/04 - 22:31:06 | 204 |       3.708Âµs |       127.0.0.1 | OPTIONS  "/api/v1/auth/refresh"

2026/02/04 22:31:07 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:154 [33mSLOW SQL >= 200ms
[0m[31;1m[466.287ms] [33m[rows:1][35m SELECT * FROM `refresh_tokens` WHERE (token_hash = 'afca2dff3c86724e807b2413dd62698771d758d7447a14a322ddb8cf62281c4f' AND revoked_at IS NULL AND expires_at > '2026-02-04 22:31:06.994') AND `refresh_tokens`.`deleted_at` IS NULL ORDER BY `refresh_tokens`.`id` LIMIT 1[0m

2026/02/04 22:31:07 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:161
[0m[33m[28.009ms] [34;1m[rows:1][0m UPDATE `refresh_tokens` SET `created_at`='2026-02-04 21:40:07.899',`updated_at`='2026-02-04 22:31:07.529',`deleted_at`=NULL,`user_id`=5,`token_hash`='afca2dff3c86724e807b2413dd62698771d758d7447a14a322ddb8cf62281c4f',`expires_at`='2026-03-06 21:40:07.899',`revoked_at`='2026-02-04 22:31:07.527' WHERE `refresh_tokens`.`deleted_at` IS NULL AND `id` = 105

2026/02/04 22:31:07 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:174
[0m[33m[6.507ms] [34;1m[rows:1][0m INSERT INTO `refresh_tokens` (`created_at`,`updated_at`,`deleted_at`,`user_id`,`token_hash`,`expires_at`,`revoked_at`) VALUES ('2026-02-04 22:31:07.556','2026-02-04 22:31:07.556',NULL,5,'913d7fdbbf7954e5d0b6d0b149fee052ac5dd6df9e82615b338675cae5ef11f7','2026-03-06 22:31:07.555',NULL)
[GIN] 2026/02/04 - 22:31:07 | 200 |    504.8525ms |       127.0.0.1 | POST     "/api/v1/auth/refresh"

2026/02/04 22:31:07 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[5.846ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 5 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/04 22:31:07 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[1.159ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/04 22:31:07 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.583ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/04 - 22:31:07 | 200 |    8.022875ms |       127.0.0.1 | GET      "/api/v1/tickets"

2026/02/04 22:31:07 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[1.049ms] [34;1m[rows:1][0m SELECT * FROM `user_roles` WHERE `user_roles`.`user_id` = 5

2026/02/04 22:31:07 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.589ms] [34;1m[rows:1][0m SELECT * FROM `roles` WHERE `roles`.`id` = 1 AND `roles`.`deleted_at` IS NULL

2026/02/04 22:31:07 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[18.652ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 5 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/04 - 22:31:07 | 200 |   19.796167ms |       127.0.0.1 | GET      "/api/v1/users/me"
[GIN] 2026/02/05 - 08:34:38 | 204 |    2.131458ms |       127.0.0.1 | OPTIONS  "/api/v1/users/me"
[GIN] 2026/02/05 - 08:34:38 | 204 |      43.875Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"
[GIN] 2026/02/05 - 08:34:38 | 401 |    6.124708ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/05 - 08:34:38 | 401 |    6.252958ms |       127.0.0.1 | GET      "/api/v1/users/me"
[GIN] 2026/02/05 - 08:34:38 | 204 |         4.5Âµs |       127.0.0.1 | OPTIONS  "/api/v1/auth/refresh"

2026/02/05 08:34:38 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:154
[0m[33m[19.587ms] [34;1m[rows:1][0m SELECT * FROM `refresh_tokens` WHERE (token_hash = '913d7fdbbf7954e5d0b6d0b149fee052ac5dd6df9e82615b338675cae5ef11f7' AND revoked_at IS NULL AND expires_at > '2026-02-05 08:34:38.719') AND `refresh_tokens`.`deleted_at` IS NULL ORDER BY `refresh_tokens`.`id` LIMIT 1

2026/02/05 08:34:38 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:161
[0m[33m[11.079ms] [34;1m[rows:1][0m UPDATE `refresh_tokens` SET `created_at`='2026-02-04 22:31:07.556',`updated_at`='2026-02-05 08:34:38.744',`deleted_at`=NULL,`user_id`=5,`token_hash`='913d7fdbbf7954e5d0b6d0b149fee052ac5dd6df9e82615b338675cae5ef11f7',`expires_at`='2026-03-06 22:31:07.555',`revoked_at`='2026-02-05 08:34:38.741' WHERE `refresh_tokens`.`deleted_at` IS NULL AND `id` = 106

2026/02/05 08:34:38 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:174
[0m[33m[3.531ms] [34;1m[rows:1][0m INSERT INTO `refresh_tokens` (`created_at`,`updated_at`,`deleted_at`,`user_id`,`token_hash`,`expires_at`,`revoked_at`) VALUES ('2026-02-05 08:34:38.753','2026-02-05 08:34:38.753',NULL,5,'8846bdd1c9b1947dd684319b47f006456dcd69d1fdcf7efb5f1186b143b26ed4','2026-03-07 08:34:38.753',NULL)
[GIN] 2026/02/05 - 08:34:38 | 200 |   38.393458ms |       127.0.0.1 | POST     "/api/v1/auth/refresh"

2026/02/05 08:34:38 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.444ms] [34;1m[rows:1][0m SELECT * FROM `user_roles` WHERE `user_roles`.`user_id` = 5

2026/02/05 08:34:38 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.672ms] [34;1m[rows:1][0m SELECT * FROM `roles` WHERE `roles`.`id` = 1 AND `roles`.`deleted_at` IS NULL

2026/02/05 08:34:38 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[3.591ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 5 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/05 - 08:34:38 | 200 |    4.568834ms |       127.0.0.1 | GET      "/api/v1/users/me"

2026/02/05 08:34:38 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[7.505ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 5 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/05 08:34:38 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.410ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/05 08:34:38 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.465ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/05 - 08:34:38 | 200 |    8.566125ms |       127.0.0.1 | GET      "/api/v1/tickets"

2026/02/05 08:34:40 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.262ms] [34;1m[rows:1][0m SELECT * FROM `user_roles` WHERE `user_roles`.`user_id` = 5

2026/02/05 08:34:40 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.530ms] [34;1m[rows:1][0m SELECT * FROM `roles` WHERE `roles`.`id` = 1 AND `roles`.`deleted_at` IS NULL

2026/02/05 08:34:40 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[1.570ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 5 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/05 - 08:34:40 | 200 |     2.17975ms |       127.0.0.1 | GET      "/api/v1/users/me"

2026/02/05 08:34:40 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.591ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 5 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/05 08:34:40 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.181ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/05 08:34:40 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.346ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/05 - 08:34:40 | 200 |    1.448042ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/05 - 08:35:12 | 204 |     813.916Âµs |       127.0.0.1 | OPTIONS  "/api/v1/users/me"

2026/02/05 08:35:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.478ms] [34;1m[rows:1][0m SELECT * FROM `user_roles` WHERE `user_roles`.`user_id` = 5

2026/02/05 08:35:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.178ms] [34;1m[rows:1][0m SELECT * FROM `roles` WHERE `roles`.`id` = 1 AND `roles`.`deleted_at` IS NULL

2026/02/05 08:35:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[2.005ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 5 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/05 - 08:35:12 | 200 |    2.195542ms |       127.0.0.1 | GET      "/api/v1/users/me"
[GIN] 2026/02/05 - 08:35:12 | 204 |       7.125Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/05 08:35:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.759ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 5 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/05 08:35:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.183ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/05 08:35:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.237ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/05 - 08:35:12 | 200 |    1.427125ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/05 - 09:08:46 | 204 |    3.731666ms |       127.0.0.1 | OPTIONS  "/api/v1/users/me"
[GIN] 2026/02/05 - 09:08:46 | 204 |    3.296917ms |       127.0.0.1 | OPTIONS  "/api/v1/tickets"
[GIN] 2026/02/05 - 09:08:46 | 401 |    4.121458ms |       127.0.0.1 | GET      "/api/v1/users/me"
[GIN] 2026/02/05 - 09:08:46 | 401 |    4.116125ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/05 - 09:08:46 | 204 |      19.334Âµs |       127.0.0.1 | OPTIONS  "/api/v1/auth/refresh"

2026/02/05 09:08:46 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:154 [33mSLOW SQL >= 200ms
[0m[31;1m[268.786ms] [33m[rows:1][35m SELECT * FROM `refresh_tokens` WHERE (token_hash = '8846bdd1c9b1947dd684319b47f006456dcd69d1fdcf7efb5f1186b143b26ed4' AND revoked_at IS NULL AND expires_at > '2026-02-05 09:08:46.539') AND `refresh_tokens`.`deleted_at` IS NULL ORDER BY `refresh_tokens`.`id` LIMIT 1[0m

2026/02/05 09:08:46 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:161
[0m[33m[18.074ms] [34;1m[rows:1][0m UPDATE `refresh_tokens` SET `created_at`='2026-02-05 08:34:38.753',`updated_at`='2026-02-05 09:08:46.814',`deleted_at`=NULL,`user_id`=5,`token_hash`='8846bdd1c9b1947dd684319b47f006456dcd69d1fdcf7efb5f1186b143b26ed4',`expires_at`='2026-03-07 08:34:38.753',`revoked_at`='2026-02-05 09:08:46.811' WHERE `refresh_tokens`.`deleted_at` IS NULL AND `id` = 107

2026/02/05 09:08:46 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:174
[0m[33m[4.222ms] [34;1m[rows:1][0m INSERT INTO `refresh_tokens` (`created_at`,`updated_at`,`deleted_at`,`user_id`,`token_hash`,`expires_at`,`revoked_at`) VALUES ('2026-02-05 09:08:46.83','2026-02-05 09:08:46.83',NULL,5,'e62de3b5e026f3cad2731b4d301c2b5f3d34c2c15d349aa8df90e4c81793683c','2026-03-07 09:08:46.829',NULL)
[GIN] 2026/02/05 - 09:08:46 | 200 |  296.884042ms |       127.0.0.1 | POST     "/api/v1/auth/refresh"

2026/02/05 09:08:46 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.482ms] [34;1m[rows:1][0m SELECT * FROM `user_roles` WHERE `user_roles`.`user_id` = 5

2026/02/05 09:08:46 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.486ms] [34;1m[rows:1][0m SELECT * FROM `roles` WHERE `roles`.`id` = 1 AND `roles`.`deleted_at` IS NULL

2026/02/05 09:08:46 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[2.530ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 5 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/05 - 09:08:46 | 200 |    2.696709ms |       127.0.0.1 | GET      "/api/v1/users/me"

2026/02/05 09:08:46 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[4.604ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 5 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/05 09:08:46 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.235ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/05 09:08:46 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.297ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/05 - 09:08:46 | 200 |    5.534333ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/05 - 10:11:53 | 204 |    2.616375ms |       127.0.0.1 | OPTIONS  "/api/v1/users/me"
[GIN] 2026/02/05 - 10:11:53 | 204 |      70.584Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"
[GIN] 2026/02/05 - 10:11:53 | 401 |    7.790084ms |       127.0.0.1 | GET      "/api/v1/users/me"
[GIN] 2026/02/05 - 10:11:53 | 401 |     277.958Âµs |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/05 - 10:11:53 | 204 |       4.708Âµs |       127.0.0.1 | OPTIONS  "/api/v1/auth/refresh"

2026/02/05 10:11:53 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:154
[0m[33m[75.621ms] [34;1m[rows:1][0m SELECT * FROM `refresh_tokens` WHERE (token_hash = 'e62de3b5e026f3cad2731b4d301c2b5f3d34c2c15d349aa8df90e4c81793683c' AND revoked_at IS NULL AND expires_at > '2026-02-05 10:11:53.496') AND `refresh_tokens`.`deleted_at` IS NULL ORDER BY `refresh_tokens`.`id` LIMIT 1

2026/02/05 10:11:53 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:161
[0m[33m[12.807ms] [34;1m[rows:1][0m UPDATE `refresh_tokens` SET `created_at`='2026-02-05 09:08:46.83',`updated_at`='2026-02-05 10:11:53.577',`deleted_at`=NULL,`user_id`=5,`token_hash`='e62de3b5e026f3cad2731b4d301c2b5f3d34c2c15d349aa8df90e4c81793683c',`expires_at`='2026-03-07 09:08:46.83',`revoked_at`='2026-02-05 10:11:53.574' WHERE `refresh_tokens`.`deleted_at` IS NULL AND `id` = 108

2026/02/05 10:11:53 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:174
[0m[33m[3.439ms] [34;1m[rows:1][0m INSERT INTO `refresh_tokens` (`created_at`,`updated_at`,`deleted_at`,`user_id`,`token_hash`,`expires_at`,`revoked_at`) VALUES ('2026-02-05 10:11:53.588','2026-02-05 10:11:53.588',NULL,5,'9d5f7e2788489a8eed4417e251674e64e4b787cf3c23dd2aab17f3d21a3fbd05','2026-03-07 10:11:53.588',NULL)
[GIN] 2026/02/05 - 10:11:53 | 200 |   96.685959ms |       127.0.0.1 | POST     "/api/v1/auth/refresh"

2026/02/05 10:11:53 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[2.505ms] [34;1m[rows:1][0m SELECT * FROM `user_roles` WHERE `user_roles`.`user_id` = 5

2026/02/05 10:11:53 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[2.315ms] [34;1m[rows:1][0m SELECT * FROM `roles` WHERE `roles`.`id` = 1 AND `roles`.`deleted_at` IS NULL

2026/02/05 10:11:53 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[6.884ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 5 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/05 - 10:11:53 | 200 |      6.9925ms |       127.0.0.1 | GET      "/api/v1/users/me"

2026/02/05 10:11:53 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[7.702ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 5 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/05 10:11:53 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.247ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/05 10:11:53 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.250ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/05 - 10:11:53 | 200 |    8.282708ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/05 - 10:12:55 | 204 |    1.000792ms |       127.0.0.1 | OPTIONS  "/api/v1/departments"

2026/02/05 10:12:55 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:27
[0m[33m[7.090ms] [34;1m[rows:8][0m SELECT * FROM `departments` WHERE `departments`.`deleted_at` IS NULL ORDER BY sort_order, id

2026/02/05 10:12:55 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[1.004ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 2 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/05 10:12:55 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.388ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 3 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/05 10:12:55 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.274ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 4 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/05 10:12:55 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.430ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 7 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/05 10:12:55 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:182
[0m[33m[0.288ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 8 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/05 - 10:12:55 | 200 |   10.738083ms |       127.0.0.1 | GET      "/api/v1/departments"
[GIN] 2026/02/05 - 10:12:55 | 204 |           6Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/1/users"

2026/02/05 10:12:55 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.595ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 5 AND p.code = 'user:read') AND `users`.`deleted_at` IS NULL

2026/02/05 10:12:55 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:48
[0m[33m[0.440ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = '1' AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/05 - 10:12:55 | 200 |    1.187167ms |       127.0.0.1 | GET      "/api/v1/departments/1/users"
[GIN] 2026/02/05 - 10:13:00 | 204 |      39.792Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/05 10:13:00 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[1.054ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 5 AND p.code = 'ticket:read') AND `users`.`deleted_at` IS NULL

2026/02/05 10:13:00 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.906ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/05 10:13:00 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.662ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/05 - 10:13:00 | 200 |      3.3885ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/05 - 12:10:21 | 204 |     3.06775ms |       127.0.0.1 | OPTIONS  "/api/v1/users/me"
[GIN] 2026/02/05 - 12:10:21 | 401 |    5.598166ms |       127.0.0.1 | GET      "/api/v1/users/me"
[GIN] 2026/02/05 - 12:10:21 | 204 |       6.375Âµs |       127.0.0.1 | OPTIONS  "/api/v1/auth/refresh"

2026/02/05 12:10:21 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:154 [33mSLOW SQL >= 200ms
[0m[31;1m[262.758ms] [33m[rows:1][35m SELECT * FROM `refresh_tokens` WHERE (token_hash = '9d5f7e2788489a8eed4417e251674e64e4b787cf3c23dd2aab17f3d21a3fbd05' AND revoked_at IS NULL AND expires_at > '2026-02-05 12:10:21.405') AND `refresh_tokens`.`deleted_at` IS NULL ORDER BY `refresh_tokens`.`id` LIMIT 1[0m

2026/02/05 12:10:21 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:161
[0m[33m[28.042ms] [34;1m[rows:1][0m UPDATE `refresh_tokens` SET `created_at`='2026-02-05 10:11:53.588',`updated_at`='2026-02-05 12:10:21.679',`deleted_at`=NULL,`user_id`=5,`token_hash`='9d5f7e2788489a8eed4417e251674e64e4b787cf3c23dd2aab17f3d21a3fbd05',`expires_at`='2026-03-07 10:11:53.588',`revoked_at`='2026-02-05 12:10:21.671' WHERE `refresh_tokens`.`deleted_at` IS NULL AND `id` = 109

2026/02/05 12:10:21 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:174
[0m[33m[2.874ms] [34;1m[rows:1][0m INSERT INTO `refresh_tokens` (`created_at`,`updated_at`,`deleted_at`,`user_id`,`token_hash`,`expires_at`,`revoked_at`) VALUES ('2026-02-05 12:10:21.7','2026-02-05 12:10:21.7',NULL,5,'d06fd0975d46ae2133969728d71bbc57cda73c35130631355ffa2829aeddbd34','2026-03-07 12:10:21.7',NULL)
[GIN] 2026/02/05 - 12:10:21 | 200 |  299.024541ms |       127.0.0.1 | POST     "/api/v1/auth/refresh"

2026/02/05 12:10:21 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[2.102ms] [34;1m[rows:1][0m SELECT * FROM `user_roles` WHERE `user_roles`.`user_id` = 5

2026/02/05 12:10:21 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[0.590ms] [34;1m[rows:1][0m SELECT * FROM `roles` WHERE `roles`.`id` = 1 AND `roles`.`deleted_at` IS NULL

2026/02/05 12:10:21 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:26
[0m[33m[4.621ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 5 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/05 - 12:10:21 | 200 |    4.819542ms |       127.0.0.1 | GET      "/api/v1/users/me"
