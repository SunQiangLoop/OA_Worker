
2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.035ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="users"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.096ms] [34;1m[rows:6][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "users" AND sql IS NOT NULL order by type = "table" desc

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.032ms] [34;1m[rows:-][0m SELECT * FROM `users` LIMIT 1

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.011ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "users" AND name = "idx_users_deleted_at"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.020ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "users" AND name = "idx_users_username"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.007ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "users" AND name = "idx_users_email"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.005ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "users" AND name = "idx_users_status"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.005ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "users" AND name = "idx_users_department_id"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="user_roles"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.048ms] [34;1m[rows:1][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "user_roles" AND sql IS NOT NULL order by type = "table" desc

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.047ms] [34;1m[rows:-][0m SELECT * FROM `user_roles` LIMIT 1

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.011ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="roles"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.032ms] [34;1m[rows:3][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "roles" AND sql IS NOT NULL order by type = "table" desc

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT * FROM `roles` LIMIT 1

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.005ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "roles" AND name = "idx_roles_deleted_at"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.041ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "roles" AND name = "idx_roles_name"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.037ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="role_permissions"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.025ms] [34;1m[rows:1][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "role_permissions" AND sql IS NOT NULL order by type = "table" desc

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT * FROM `role_permissions` LIMIT 1

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="permissions"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.045ms] [34;1m[rows:3][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "permissions" AND sql IS NOT NULL order by type = "table" desc

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.005ms] [34;1m[rows:-][0m SELECT * FROM `permissions` LIMIT 1

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "permissions" AND name = "idx_permissions_deleted_at"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "permissions" AND name = "idx_permissions_code"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="refresh_tokens"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.123ms] [34;1m[rows:5][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "refresh_tokens" AND sql IS NOT NULL order by type = "table" desc

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.050ms] [34;1m[rows:-][0m SELECT * FROM `refresh_tokens` LIMIT 1

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.008ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "refresh_tokens" AND name = "idx_refresh_tokens_deleted_at"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.005ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "refresh_tokens" AND name = "idx_refresh_tokens_user_id"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.008ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "refresh_tokens" AND name = "idx_refresh_tokens_token_hash"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "refresh_tokens" AND name = "idx_refresh_tokens_expires_at"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="api_keys"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.029ms] [34;1m[rows:4][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "api_keys" AND sql IS NOT NULL order by type = "table" desc

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.007ms] [34;1m[rows:-][0m SELECT * FROM `api_keys` LIMIT 1

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "api_keys" AND name = "idx_api_keys_deleted_at"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "api_keys" AND name = "idx_api_keys_key_id"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "api_keys" AND name = "idx_api_keys_status"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="api_nonces"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.021ms] [34;1m[rows:5][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "api_nonces" AND sql IS NOT NULL order by type = "table" desc

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.005ms] [34;1m[rows:-][0m SELECT * FROM `api_nonces` LIMIT 1

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "api_nonces" AND name = "idx_api_nonces_deleted_at"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "api_nonces" AND name = "idx_api_nonces_key_id"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "api_nonces" AND name = "idx_api_nonces_nonce"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.003ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "api_nonces" AND name = "idx_api_nonces_expires_at"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.005ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="tickets"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.022ms] [34;1m[rows:8][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "tickets" AND sql IS NOT NULL order by type = "table" desc

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.012ms] [34;1m[rows:-][0m SELECT * FROM `tickets` LIMIT 1

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.007ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "tickets" AND name = "idx_tickets_deleted_at"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "tickets" AND name = "idx_tickets_title"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "tickets" AND name = "idx_tickets_status"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "tickets" AND name = "idx_tickets_priority"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "tickets" AND name = "idx_tickets_created_by"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "tickets" AND name = "idx_tickets_assignee_id"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "tickets" AND name = "idx_tickets_type"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.003ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="departments"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.023ms] [34;1m[rows:5][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "departments" AND sql IS NOT NULL order by type = "table" desc

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.008ms] [34;1m[rows:-][0m SELECT * FROM `departments` LIMIT 1

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "departments" AND name = "idx_departments_deleted_at"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "departments" AND name = "idx_departments_name"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "departments" AND name = "idx_departments_parent_id"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.003ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "departments" AND name = "idx_departments_manager_id"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.003ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="form_definitions"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.022ms] [34;1m[rows:4][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "form_definitions" AND sql IS NOT NULL order by type = "table" desc

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.005ms] [34;1m[rows:-][0m SELECT * FROM `form_definitions` LIMIT 1

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.034ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "form_definitions" AND name = "idx_form_definitions_deleted_at"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.018ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "form_definitions" AND name = "idx_form_definitions_code"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.005ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "form_definitions" AND name = "idx_form_definitions_created_by"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="form_data"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.036ms] [34;1m[rows:5][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "form_data" AND sql IS NOT NULL order by type = "table" desc

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.093ms] [34;1m[rows:-][0m SELECT * FROM `form_data` LIMIT 1

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.005ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "form_data" AND name = "idx_form_data_deleted_at"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "form_data" AND name = "idx_form_data_form_id"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.058ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "form_data" AND name = "idx_form_data_owner_id"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.007ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "form_data" AND name = "idx_form_data_status"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="expense_reimbursements"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.026ms] [34;1m[rows:6][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "expense_reimbursements" AND sql IS NOT NULL order by type = "table" desc

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.008ms] [34;1m[rows:-][0m SELECT * FROM `expense_reimbursements` LIMIT 1

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "expense_reimbursements" AND name = "idx_expense_reimbursements_deleted_at"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "expense_reimbursements" AND name = "idx_expense_reimbursements_form_data_id"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "expense_reimbursements" AND name = "idx_expense_reimbursements_reimbursement_type"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "expense_reimbursements" AND name = "idx_expense_reimbursements_status"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "expense_reimbursements" AND name = "idx_expense_reimbursements_workflow_instance_id"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.003ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="expense_items"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.019ms] [34;1m[rows:3][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "expense_items" AND sql IS NOT NULL order by type = "table" desc

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT * FROM `expense_items` LIMIT 1

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.011ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "table" AND tbl_name = "expense_items" AND (sql LIKE "%CONSTRAINT ""fk_expense_reimbursements_items"" %" OR sql LIKE "%CONSTRAINT fk_expense_reimbursements_items %" OR sql LIKE "%CONSTRAINT `fk_expense_reimbursements_items`%" OR sql LIKE "%CONSTRAINT [fk_expense_reimbursements_items]%" OR sql LIKE "%CONSTRAINT 	fk_expense_reimbursements_items	%")

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "expense_items" AND name = "idx_expense_items_deleted_at"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "expense_items" AND name = "idx_expense_items_reimbursement_id"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.003ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="attachments"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.019ms] [34;1m[rows:3][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "attachments" AND sql IS NOT NULL order by type = "table" desc

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.009ms] [34;1m[rows:-][0m SELECT * FROM `attachments` LIMIT 1

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.007ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "table" AND tbl_name = "attachments" AND (sql LIKE "%CONSTRAINT ""fk_expense_reimbursements_attachments"" %" OR sql LIKE "%CONSTRAINT fk_expense_reimbursements_attachments %" OR sql LIKE "%CONSTRAINT `fk_expense_reimbursements_attachments`%" OR sql LIKE "%CONSTRAINT [fk_expense_reimbursements_attachments]%" OR sql LIKE "%CONSTRAINT 	fk_expense_reimbursements_attachments	%")

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "attachments" AND name = "idx_attachments_deleted_at"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "attachments" AND name = "idx_attachments_reimbursement_id"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.003ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="workflow_templates"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.019ms] [34;1m[rows:3][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "workflow_templates" AND sql IS NOT NULL order by type = "table" desc

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.005ms] [34;1m[rows:-][0m SELECT * FROM `workflow_templates` LIMIT 1

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.005ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "workflow_templates" AND name = "idx_workflow_templates_deleted_at"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "workflow_templates" AND name = "idx_workflow_templates_created_by"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="process_nodes"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.021ms] [34;1m[rows:5][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "process_nodes" AND sql IS NOT NULL order by type = "table" desc

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.005ms] [34;1m[rows:-][0m SELECT * FROM `process_nodes` LIMIT 1

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.006ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "table" AND tbl_name = "process_nodes" AND (sql LIKE "%CONSTRAINT ""fk_workflow_templates_nodes"" %" OR sql LIKE "%CONSTRAINT fk_workflow_templates_nodes %" OR sql LIKE "%CONSTRAINT `fk_workflow_templates_nodes`%" OR sql LIKE "%CONSTRAINT [fk_workflow_templates_nodes]%" OR sql LIKE "%CONSTRAINT 	fk_workflow_templates_nodes	%")

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "process_nodes" AND name = "idx_process_nodes_deleted_at"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "process_nodes" AND name = "idx_process_nodes_template_id"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "process_nodes" AND name = "idx_process_nodes_node_key"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "process_nodes" AND name = "idx_process_nodes_node_type"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.003ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="workflow_instances"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.020ms] [34;1m[rows:7][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "workflow_instances" AND sql IS NOT NULL order by type = "table" desc

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.005ms] [34;1m[rows:-][0m SELECT * FROM `workflow_instances` LIMIT 1

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "workflow_instances" AND name = "idx_workflow_instances_deleted_at"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "workflow_instances" AND name = "idx_workflow_instances_template_id"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "workflow_instances" AND name = "idx_workflow_instances_business_type"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "workflow_instances" AND name = "idx_workflow_instances_business_id"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "workflow_instances" AND name = "idx_workflow_instances_status"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.003ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "workflow_instances" AND name = "idx_workflow_instances_started_by"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.003ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="approval_logs"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.023ms] [34;1m[rows:5][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "approval_logs" AND sql IS NOT NULL order by type = "table" desc

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT * FROM `approval_logs` LIMIT 1

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "approval_logs" AND name = "idx_approval_logs_deleted_at"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.003ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "approval_logs" AND name = "idx_approval_logs_instance_id"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "approval_logs" AND name = "idx_approval_logs_node_key"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/cmd/server/main.go:20
[0m[33m[0.004ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "approval_logs" AND name = "idx_approval_logs_actor_id"

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:23
[0m[33m[0.054ms] [34;1m[rows:1][0m SELECT * FROM `permissions` WHERE code = "ticket:read" AND `permissions`.`deleted_at` IS NULL ORDER BY `permissions`.`id` LIMIT 1

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:23
[0m[33m[0.020ms] [34;1m[rows:1][0m SELECT * FROM `permissions` WHERE code = "ticket:write" AND `permissions`.`deleted_at` IS NULL ORDER BY `permissions`.`id` LIMIT 1

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:23
[0m[33m[0.018ms] [34;1m[rows:1][0m SELECT * FROM `permissions` WHERE code = "user:read" AND `permissions`.`deleted_at` IS NULL ORDER BY `permissions`.`id` LIMIT 1

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:23
[0m[33m[0.014ms] [34;1m[rows:1][0m SELECT * FROM `permissions` WHERE code = "user:write" AND `permissions`.`deleted_at` IS NULL ORDER BY `permissions`.`id` LIMIT 1

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:33
[0m[33m[0.019ms] [34;1m[rows:1][0m SELECT * FROM `roles` WHERE name = "admin" AND `roles`.`deleted_at` IS NULL ORDER BY `roles`.`id` LIMIT 1

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:43
[0m[33m[0.028ms] [34;1m[rows:4][0m SELECT * FROM `permissions` WHERE `permissions`.`deleted_at` IS NULL

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:44
[0m[33m[0.108ms] [34;1m[rows:0][0m INSERT INTO `permissions` (`created_at`,`updated_at`,`deleted_at`,`code`,`description`,`id`) VALUES ("2026-02-01 11:10:23.682","2026-02-01 11:10:23.682",NULL,"ticket:read","Read tickets",1),("2026-02-01 11:10:23.682","2026-02-01 11:10:23.682",NULL,"ticket:write","Create/update tickets",2),("2026-02-01 11:10:23.683","2026-02-01 11:10:23.683",NULL,"user:read","Read users",3),("2026-02-01 11:10:23.683","2026-02-01 11:10:23.683",NULL,"user:write","Manage users",4) ON CONFLICT DO NOTHING RETURNING `id`

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:44
[0m[33m[0.017ms] [34;1m[rows:0][0m INSERT INTO `role_permissions` (`role_id`,`permission_id`) VALUES (1,1),(1,2),(1,3),(1,4) ON CONFLICT DO NOTHING

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:44
[0m[33m[0.741ms] [34;1m[rows:1][0m UPDATE `roles` SET `updated_at`="2026-02-03 11:32:17.389" WHERE `roles`.`deleted_at` IS NULL AND `id` = 1

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:44
[0m[33m[0.078ms] [34;1m[rows:0][0m DELETE FROM `role_permissions` WHERE `role_permissions`.`role_id` = 1 AND `role_permissions`.`permission_id` NOT IN (1,2,3,4)

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:48
[0m[33m[0.045ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE username = "admin" AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:83
[0m[33m[0.021ms] [34;1m[rows:1][0m SELECT count(*) FROM `departments` WHERE `departments`.`deleted_at` IS NULL

2026/02/03 11:32:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/service/seed.go:164
[0m[33m[0.019ms] [34;1m[rows:1][0m SELECT count(*) FROM `workflow_templates` WHERE name = "Expense Reimbursement" AND `workflow_templates`.`deleted_at` IS NULL
[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /healthz                  --> example.com/oa-workorder/internal/http.NewRouter.func1 (4 handlers)
[GIN-debug] POST   /api/v1/auth/slider/verify --> example.com/oa-workorder/internal/handler.(*AuthHandler).SliderVerify-fm (4 handlers)
[GIN-debug] POST   /api/v1/auth/login        --> example.com/oa-workorder/internal/handler.(*AuthHandler).Login-fm (4 handlers)
[GIN-debug] POST   /api/v1/auth/refresh      --> example.com/oa-workorder/internal/handler.(*AuthHandler).Refresh-fm (4 handlers)
[GIN-debug] POST   /api/v1/auth/logout       --> example.com/oa-workorder/internal/handler.(*AuthHandler).Logout-fm (4 handlers)
[GIN-debug] GET    /api/v1/users/me          --> example.com/oa-workorder/internal/handler.(*UserHandler).Me-fm (5 handlers)
[GIN-debug] GET    /api/v1/users             --> example.com/oa-workorder/internal/handler.(*UserHandler).List-fm (5 handlers)
[GIN-debug] GET    /api/v1/departments       --> example.com/oa-workorder/internal/handler.(*DepartmentHandler).List-fm (5 handlers)
[GIN-debug] GET    /api/v1/departments/:id/users --> example.com/oa-workorder/internal/handler.(*DepartmentHandler).GetUsers-fm (5 handlers)
[GIN-debug] GET    /api/v1/tickets           --> example.com/oa-workorder/internal/handler.(*TicketHandler).List-fm (6 handlers)
[GIN-debug] GET    /api/v1/tickets/:id       --> example.com/oa-workorder/internal/handler.(*TicketHandler).Get-fm (6 handlers)
[GIN-debug] POST   /api/v1/tickets           --> example.com/oa-workorder/internal/handler.(*TicketHandler).Create-fm (6 handlers)
[GIN-debug] PATCH  /api/v1/tickets/:id       --> example.com/oa-workorder/internal/handler.(*TicketHandler).Update-fm (6 handlers)
[GIN-debug] GET    /api/v1/forms             --> example.com/oa-workorder/internal/handler.(*FormHandler).List-fm (5 handlers)
[GIN-debug] POST   /api/v1/forms             --> example.com/oa-workorder/internal/handler.(*FormHandler).Create-fm (5 handlers)
[GIN-debug] GET    /api/v1/forms/:id         --> example.com/oa-workorder/internal/handler.(*FormHandler).Get-fm (5 handlers)
[GIN-debug] GET    /api/v1/workflows/templates --> example.com/oa-workorder/internal/handler.(*WorkflowHandler).ListTemplates-fm (5 handlers)
[GIN-debug] POST   /api/v1/workflows/templates --> example.com/oa-workorder/internal/handler.(*WorkflowHandler).CreateTemplate-fm (5 handlers)
[GIN-debug] GET    /api/v1/workflows/templates/:id --> example.com/oa-workorder/internal/handler.(*WorkflowHandler).GetTemplate-fm (5 handlers)
[GIN-debug] GET    /api/v1/reimbursements    --> example.com/oa-workorder/internal/handler.(*ReimbursementHandler).List-fm (5 handlers)
[GIN-debug] POST   /api/v1/reimbursements    --> example.com/oa-workorder/internal/handler.(*ReimbursementHandler).Create-fm (5 handlers)
[GIN-debug] GET    /api/v1/reimbursements/:id --> example.com/oa-workorder/internal/handler.(*ReimbursementHandler).Get-fm (5 handlers)
[GIN-debug] PATCH  /api/v1/reimbursements/:id --> example.com/oa-workorder/internal/handler.(*ReimbursementHandler).Update-fm (5 handlers)
[GIN-debug] POST   /api/v1/reimbursements/:id/submit --> example.com/oa-workorder/internal/handler.(*ReimbursementHandler).Submit-fm (5 handlers)
[GIN-debug] POST   /api/v1/reimbursements/:id/approve --> example.com/oa-workorder/internal/handler.(*ReimbursementHandler).Approve-fm (5 handlers)
[GIN-debug] POST   /api/v1/reimbursements/:id/reject --> example.com/oa-workorder/internal/handler.(*ReimbursementHandler).Reject-fm (5 handlers)
[GIN-debug] GET    /api/v1/reimbursements/:id/logs --> example.com/oa-workorder/internal/handler.(*ApprovalLogHandler).ListByReimbursement-fm (5 handlers)
[GIN-debug] POST   /open/v1/tickets          --> example.com/oa-workorder/internal/handler.(*OpenHandler).CreateTicket-fm (5 handlers)
[GIN-debug] GET    /public/v1/approvals      --> example.com/oa-workorder/internal/handler.(*TicketHandler).PublicList-fm (4 handlers)
2026/02/03 11:32:17 server listening on 127.0.0.1:18080
[GIN-debug] [WARNING] You trusted all proxies, this is NOT safe. We recommend you to set a value.
Please check https://github.com/gin-gonic/gin/blob/master/docs/doc.md#dont-trust-all-proxies for details.
[GIN-debug] Listening and serving HTTP on 127.0.0.1:18080

2026/02/03 11:32:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:124
[0m[33m[0.216ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE type = "expense" AND `tickets`.`deleted_at` IS NULL

2026/02/03 11:32:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:125
[0m[33m[0.079ms] [34;1m[rows:3][0m SELECT * FROM `tickets` WHERE type = "expense" AND `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/03 - 11:32:20 | 200 |     533.667Âµs |       127.0.0.1 | GET      "/public/v1/approvals?type=expense"
[GIN] 2026/02/03 - 11:32:30 | 404 |       2.542Âµs |       127.0.0.1 | HEAD     "/public/v1/approvals?type=expense"

2026/02/03 11:34:35 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:124
[0m[33m[0.243ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE type = "expense" AND `tickets`.`deleted_at` IS NULL

2026/02/03 11:34:35 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:125
[0m[33m[0.262ms] [34;1m[rows:3][0m SELECT * FROM `tickets` WHERE type = "expense" AND `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/03 - 11:34:35 | 200 |     936.875Âµs |       127.0.0.1 | GET      "/public/v1/approvals?type=expense"
[GIN] 2026/02/03 - 11:34:46 | 204 |      10.167Âµs |       127.0.0.1 | OPTIONS  "/public/v1/finance/bills/pay"

2026/02/03 11:35:36 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:124
[0m[33m[0.406ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE type = "expense" AND `tickets`.`deleted_at` IS NULL

2026/02/03 11:35:36 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:125
[0m[33m[0.439ms] [34;1m[rows:3][0m SELECT * FROM `tickets` WHERE type = "expense" AND `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/03 - 11:35:36 | 200 |      2.1775ms |       127.0.0.1 | GET      "/public/v1/approvals?type=expense"

2026/02/03 11:35:36 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:124
[0m[33m[0.217ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE type = "expense" AND `tickets`.`deleted_at` IS NULL

2026/02/03 11:35:36 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:125
[0m[33m[0.183ms] [34;1m[rows:3][0m SELECT * FROM `tickets` WHERE type = "expense" AND `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/03 - 11:35:36 | 200 |     647.375Âµs |       127.0.0.1 | GET      "/public/v1/approvals?type=expense"
[GIN] 2026/02/03 - 11:36:52 | 204 |       16.25Âµs |       127.0.0.1 | OPTIONS  "/public/v1/finance/bills/pay"

2026/02/03 11:37:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:124
[0m[33m[0.493ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE type = "expense" AND `tickets`.`deleted_at` IS NULL

2026/02/03 11:37:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:125
[0m[33m[0.226ms] [34;1m[rows:3][0m SELECT * FROM `tickets` WHERE type = "expense" AND `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/03 - 11:37:20 | 200 |    1.272917ms |       127.0.0.1 | GET      "/public/v1/approvals?type=expense"
[GIN] 2026/02/03 - 11:38:26 | 204 |      16.459Âµs |       127.0.0.1 | OPTIONS  "/api/v1/users/me"

2026/02/03 11:38:26 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:24
[0m[33m[0.144ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 1 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/03 - 11:38:26 | 200 |     316.084Âµs |       127.0.0.1 | GET      "/api/v1/users/me"
[GIN] 2026/02/03 - 11:38:26 | 204 |       6.083Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/03 11:38:26 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.266ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:26 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.147ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/03 11:38:26 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.226ms] [34;1m[rows:3][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/03 - 11:38:26 | 200 |     996.334Âµs |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/03 - 11:38:31 | 204 |       5.584Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets/4"

2026/02/03 11:38:31 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.177ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:31 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.131ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = "4" AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/03 - 11:38:31 | 200 |     479.708Âµs |       127.0.0.1 | GET      "/api/v1/tickets/4"
[GIN] 2026/02/03 - 11:38:37 | 204 |      78.792Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/03 11:38:37 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.321ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:37 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.099ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/03 11:38:37 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.135ms] [34;1m[rows:3][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/03 - 11:38:37 | 200 |     841.416Âµs |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/03 - 11:38:38 | 204 |      10.167Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets/3"

2026/02/03 11:38:38 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.217ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:38 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.086ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = "3" AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/03 - 11:38:38 | 200 |     489.083Âµs |       127.0.0.1 | GET      "/api/v1/tickets/3"

2026/02/03 11:38:42 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.268ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:42 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.048ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/03 11:38:42 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.123ms] [34;1m[rows:3][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/03 - 11:38:42 | 200 |     723.584Âµs |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/03 - 11:38:43 | 204 |       6.917Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets/4"

2026/02/03 11:38:43 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.215ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:43 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.087ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = "4" AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/03 - 11:38:43 | 200 |     453.792Âµs |       127.0.0.1 | GET      "/api/v1/tickets/4"

2026/02/03 11:38:45 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.408ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:write") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:45 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:164
[0m[33m[3.180ms] [34;1m[rows:1][0m UPDATE `tickets` SET `status`="pending",`updated_at`="2026-02-03 11:38:45.451" WHERE id = "4" AND `tickets`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:38:45 | 200 |    4.318833ms |       127.0.0.1 | PATCH    "/api/v1/tickets/4"

2026/02/03 11:38:45 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.364ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:45 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.107ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = "4" AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/03 - 11:38:45 | 200 |     731.833Âµs |       127.0.0.1 | GET      "/api/v1/tickets/4"

2026/02/03 11:38:46 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.422ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:write") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:46 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:164
[0m[33m[4.190ms] [34;1m[rows:1][0m UPDATE `tickets` SET `status`="pending",`updated_at`="2026-02-03 11:38:46.766" WHERE id = "4" AND `tickets`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:38:46 | 200 |    5.902167ms |       127.0.0.1 | PATCH    "/api/v1/tickets/4"

2026/02/03 11:38:46 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.414ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:46 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.300ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = "4" AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/03 - 11:38:46 | 200 |    1.124958ms |       127.0.0.1 | GET      "/api/v1/tickets/4"

2026/02/03 11:38:47 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.470ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:write") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:47 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:164
[0m[33m[2.667ms] [34;1m[rows:1][0m UPDATE `tickets` SET `status`="pending",`updated_at`="2026-02-03 11:38:47.232" WHERE id = "4" AND `tickets`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:38:47 | 200 |     3.59125ms |       127.0.0.1 | PATCH    "/api/v1/tickets/4"

2026/02/03 11:38:47 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.380ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:47 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.222ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = "4" AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/03 - 11:38:47 | 200 |    1.025125ms |       127.0.0.1 | GET      "/api/v1/tickets/4"

2026/02/03 11:38:47 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.456ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:write") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:47 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:164
[0m[33m[2.563ms] [34;1m[rows:1][0m UPDATE `tickets` SET `status`="pending",`updated_at`="2026-02-03 11:38:47.399" WHERE id = "4" AND `tickets`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:38:47 | 200 |    3.496167ms |       127.0.0.1 | PATCH    "/api/v1/tickets/4"

2026/02/03 11:38:47 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.382ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:47 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.539ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = "4" AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/03 - 11:38:47 | 200 |    1.518583ms |       127.0.0.1 | GET      "/api/v1/tickets/4"

2026/02/03 11:38:47 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.475ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:write") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:47 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:164
[0m[33m[3.672ms] [34;1m[rows:1][0m UPDATE `tickets` SET `status`="pending",`updated_at`="2026-02-03 11:38:47.566" WHERE id = "4" AND `tickets`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:38:47 | 200 |    4.799375ms |       127.0.0.1 | PATCH    "/api/v1/tickets/4"

2026/02/03 11:38:47 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.312ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:47 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.174ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = "4" AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/03 - 11:38:47 | 200 |      812.75Âµs |       127.0.0.1 | GET      "/api/v1/tickets/4"

2026/02/03 11:38:47 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.435ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:write") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:47 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:164
[0m[33m[2.149ms] [34;1m[rows:1][0m UPDATE `tickets` SET `status`="pending",`updated_at`="2026-02-03 11:38:47.716" WHERE id = "4" AND `tickets`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:38:47 | 200 |    3.036917ms |       127.0.0.1 | PATCH    "/api/v1/tickets/4"

2026/02/03 11:38:47 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.383ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:47 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.312ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = "4" AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/03 - 11:38:47 | 200 |    1.280958ms |       127.0.0.1 | GET      "/api/v1/tickets/4"

2026/02/03 11:38:47 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.415ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:write") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:47 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:164
[0m[33m[2.530ms] [34;1m[rows:1][0m UPDATE `tickets` SET `status`="pending",`updated_at`="2026-02-03 11:38:47.865" WHERE id = "4" AND `tickets`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:38:47 | 200 |      3.4025ms |       127.0.0.1 | PATCH    "/api/v1/tickets/4"

2026/02/03 11:38:47 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.379ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:47 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.214ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = "4" AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/03 - 11:38:47 | 200 |    1.042042ms |       127.0.0.1 | GET      "/api/v1/tickets/4"
[GIN] 2026/02/03 - 11:38:53 | 204 |      17.458Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets/4"

2026/02/03 11:38:53 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.458ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:write") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:53 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:164
[0m[33m[2.689ms] [34;1m[rows:1][0m UPDATE `tickets` SET `status`="pending",`updated_at`="2026-02-03 11:38:53.418" WHERE id = "4" AND `tickets`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:38:53 | 200 |     3.71825ms |       127.0.0.1 | PATCH    "/api/v1/tickets/4"

2026/02/03 11:38:53 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.386ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:53 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.184ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = "4" AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/03 - 11:38:53 | 200 |     924.417Âµs |       127.0.0.1 | GET      "/api/v1/tickets/4"

2026/02/03 11:38:54 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.431ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:write") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:54 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:164
[0m[33m[3.031ms] [34;1m[rows:1][0m UPDATE `tickets` SET `status`="pending",`updated_at`="2026-02-03 11:38:54.566" WHERE id = "4" AND `tickets`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:38:54 | 200 |      4.1695ms |       127.0.0.1 | PATCH    "/api/v1/tickets/4"

2026/02/03 11:38:54 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.309ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:54 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.188ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = "4" AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/03 - 11:38:54 | 200 |     834.083Âµs |       127.0.0.1 | GET      "/api/v1/tickets/4"

2026/02/03 11:38:54 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.497ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:write") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:54 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:164
[0m[33m[2.947ms] [34;1m[rows:1][0m UPDATE `tickets` SET `status`="pending",`updated_at`="2026-02-03 11:38:54.865" WHERE id = "4" AND `tickets`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:38:54 | 200 |    3.932625ms |       127.0.0.1 | PATCH    "/api/v1/tickets/4"

2026/02/03 11:38:54 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.444ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:54 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.630ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = "4" AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/03 - 11:38:54 | 200 |        1.64ms |       127.0.0.1 | GET      "/api/v1/tickets/4"

2026/02/03 11:38:55 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.510ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:write") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:55 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:164
[0m[33m[2.623ms] [34;1m[rows:1][0m UPDATE `tickets` SET `status`="pending",`updated_at`="2026-02-03 11:38:55.032" WHERE id = "4" AND `tickets`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:38:55 | 200 |    3.635375ms |       127.0.0.1 | PATCH    "/api/v1/tickets/4"

2026/02/03 11:38:55 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.439ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:55 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.552ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = "4" AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/03 - 11:38:55 | 200 |    1.526375ms |       127.0.0.1 | GET      "/api/v1/tickets/4"

2026/02/03 11:38:55 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.677ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:write") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:55 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:164
[0m[33m[2.277ms] [34;1m[rows:1][0m UPDATE `tickets` SET `status`="pending",`updated_at`="2026-02-03 11:38:55.349" WHERE id = "4" AND `tickets`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:38:55 | 200 |    3.734208ms |       127.0.0.1 | PATCH    "/api/v1/tickets/4"

2026/02/03 11:38:55 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.329ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:55 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.204ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = "4" AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/03 - 11:38:55 | 200 |         983Âµs |       127.0.0.1 | GET      "/api/v1/tickets/4"
[GIN] 2026/02/03 - 11:38:59 | 204 |      14.625Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets/4"

2026/02/03 11:38:59 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.654ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:write") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:59 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:164
[0m[33m[1.394ms] [34;1m[rows:1][0m UPDATE `tickets` SET `status`="pending",`updated_at`="2026-02-03 11:38:59.571" WHERE id = "4" AND `tickets`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:38:59 | 200 |    3.791709ms |       127.0.0.1 | PATCH    "/api/v1/tickets/4"

2026/02/03 11:38:59 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.374ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:59 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.211ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = "4" AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/03 - 11:38:59 | 200 |     900.625Âµs |       127.0.0.1 | GET      "/api/v1/tickets/4"

2026/02/03 11:38:59 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.444ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:write") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:59 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:164
[0m[33m[1.445ms] [34;1m[rows:1][0m UPDATE `tickets` SET `status`="pending",`updated_at`="2026-02-03 11:38:59.73" WHERE id = "4" AND `tickets`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:38:59 | 200 |    2.294875ms |       127.0.0.1 | PATCH    "/api/v1/tickets/4"

2026/02/03 11:38:59 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.230ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:59 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.145ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = "4" AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/03 - 11:38:59 | 200 |     574.667Âµs |       127.0.0.1 | GET      "/api/v1/tickets/4"

2026/02/03 11:38:59 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.455ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:write") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:59 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:164
[0m[33m[3.576ms] [34;1m[rows:1][0m UPDATE `tickets` SET `status`="pending",`updated_at`="2026-02-03 11:38:59.919" WHERE id = "4" AND `tickets`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:38:59 | 200 |    5.513708ms |       127.0.0.1 | PATCH    "/api/v1/tickets/4"

2026/02/03 11:38:59 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.335ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:38:59 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.137ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = "4" AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/03 - 11:38:59 | 200 |      749.25Âµs |       127.0.0.1 | GET      "/api/v1/tickets/4"

2026/02/03 11:39:00 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.433ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:write") AND `users`.`deleted_at` IS NULL

2026/02/03 11:39:00 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:164
[0m[33m[3.175ms] [34;1m[rows:1][0m UPDATE `tickets` SET `status`="pending",`updated_at`="2026-02-03 11:39:00.084" WHERE id = "4" AND `tickets`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:39:00 | 200 |     4.17525ms |       127.0.0.1 | PATCH    "/api/v1/tickets/4"

2026/02/03 11:39:00 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.308ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:39:00 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.258ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = "4" AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/03 - 11:39:00 | 200 |    2.082666ms |       127.0.0.1 | GET      "/api/v1/tickets/4"

2026/02/03 11:39:00 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.249ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:write") AND `users`.`deleted_at` IS NULL

2026/02/03 11:39:00 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:164
[0m[33m[1.485ms] [34;1m[rows:1][0m UPDATE `tickets` SET `status`="pending",`updated_at`="2026-02-03 11:39:00.249" WHERE id = "4" AND `tickets`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:39:00 | 200 |    1.966417ms |       127.0.0.1 | PATCH    "/api/v1/tickets/4"

2026/02/03 11:39:00 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.198ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:39:00 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.111ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = "4" AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/03 - 11:39:00 | 200 |     493.042Âµs |       127.0.0.1 | GET      "/api/v1/tickets/4"

2026/02/03 11:39:00 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.456ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:write") AND `users`.`deleted_at` IS NULL

2026/02/03 11:39:00 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:164
[0m[33m[3.990ms] [34;1m[rows:1][0m UPDATE `tickets` SET `status`="pending",`updated_at`="2026-02-03 11:39:00.401" WHERE id = "4" AND `tickets`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:39:00 | 200 |    6.316875ms |       127.0.0.1 | PATCH    "/api/v1/tickets/4"

2026/02/03 11:39:00 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.394ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:39:00 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:89
[0m[33m[0.169ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE `tickets`.`id` = "4" AND `tickets`.`deleted_at` IS NULL ORDER BY `tickets`.`id` LIMIT 1
[GIN] 2026/02/03 - 11:39:00 | 200 |     866.875Âµs |       127.0.0.1 | GET      "/api/v1/tickets/4"
[GIN] 2026/02/03 - 11:39:17 | 204 |      13.334Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/03 11:39:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.247ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:39:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.066ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/03 11:39:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.193ms] [34;1m[rows:3][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/03 - 11:39:17 | 200 |     872.833Âµs |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/03 - 11:39:28 | 204 |      13.459Âµs |       127.0.0.1 | OPTIONS  "/api/v1/auth/logout"

2026/02/03 11:39:28 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:195
[0m[33m[2.521ms] [34;1m[rows:1][0m UPDATE `refresh_tokens` SET `revoked_at`="2026-02-03 11:39:28.101",`updated_at`="2026-02-03 11:39:28.101" WHERE token_hash = "68c6ee1c242403db3edec89b968320fd7d42afe8eea3bfa3e65d22346dbe787b" AND `refresh_tokens`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:39:28 | 200 |    2.932875ms |       127.0.0.1 | POST     "/api/v1/auth/logout"
[GIN] 2026/02/03 - 11:40:47 | 204 |       10.25Âµs |       127.0.0.1 | OPTIONS  "/api/v1/auth/slider/verify"
[GIN] 2026/02/03 - 11:40:47 | 200 |     242.625Âµs |       127.0.0.1 | POST     "/api/v1/auth/slider/verify"
[GIN] 2026/02/03 - 11:40:53 | 204 |        13.5Âµs |       127.0.0.1 | OPTIONS  "/api/v1/auth/login"

2026/02/03 11:40:53 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:48
[0m[33m[0.660ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE (username = "admin" OR email = "admin") AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 11:40:53 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:79
[0m[33m[1.009ms] [34;1m[rows:1][0m UPDATE `users` SET `created_at`="2026-02-01 11:10:23.756",`updated_at`="2026-02-03 11:40:53.647",`deleted_at`=NULL,`username`="admin",`email`="admin@example.com",`password_hash`="$argon2id$v=19$m=65536,t=3,p=2$omSgq0MkyfmGbKXfEq1vvg$cF9uSy5aRFo3QuxwOqhgBM+xVQOLE0sT+OE9ZEyNxN4",`status`="active",`last_login_at`="2026-02-03 11:40:53.647",`lock_until`=NULL,`failed_count`=0,`department_id`=NULL,`position`="" WHERE `users`.`deleted_at` IS NULL AND `id` = 1

2026/02/03 11:40:53 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:93
[0m[33m[0.502ms] [34;1m[rows:1][0m INSERT INTO `refresh_tokens` (`created_at`,`updated_at`,`deleted_at`,`user_id`,`token_hash`,`expires_at`,`revoked_at`) VALUES ("2026-02-03 11:40:53.648","2026-02-03 11:40:53.648",NULL,1,"ef0b4b8d4a697502b216b1f234c9c145690fbbb798f27f60cfe4e553517f21d7","2026-03-05 11:40:53.648",NULL) RETURNING `id`
[GIN] 2026/02/03 - 11:40:53 | 200 |   94.493042ms |       127.0.0.1 | POST     "/api/v1/auth/login"
[GIN] 2026/02/03 - 11:40:53 | 204 |       1.791Âµs |       127.0.0.1 | OPTIONS  "/api/v1/users/me"

2026/02/03 11:40:53 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:24
[0m[33m[0.078ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 1 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/03 - 11:40:53 | 200 |     134.625Âµs |       127.0.0.1 | GET      "/api/v1/users/me"
[GIN] 2026/02/03 - 11:40:53 | 204 |        9.25Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/03 11:40:53 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.161ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:40:53 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.028ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/03 11:40:53 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.067ms] [34;1m[rows:3][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/03 - 11:40:53 | 200 |     434.833Âµs |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/03 - 11:43:01 | 204 |       7.875Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets?status=approved"

2026/02/03 11:43:01 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.343ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:43:01 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.098ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE status = "approved" AND `tickets`.`deleted_at` IS NULL

2026/02/03 11:43:01 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.314ms] [34;1m[rows:2][0m SELECT * FROM `tickets` WHERE status = "approved" AND `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/03 - 11:43:01 | 200 |     1.05875ms |       127.0.0.1 | GET      "/api/v1/tickets?status=approved"
[GIN] 2026/02/03 - 11:43:02 | 204 |      13.958Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets?status=reviewing"

2026/02/03 11:43:02 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.581ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:43:02 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.086ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE status = "reviewing" AND `tickets`.`deleted_at` IS NULL

2026/02/03 11:43:02 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.072ms] [34;1m[rows:0][0m SELECT * FROM `tickets` WHERE status = "reviewing" AND `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/03 - 11:43:02 | 200 |    1.215834ms |       127.0.0.1 | GET      "/api/v1/tickets?status=reviewing"
[GIN] 2026/02/03 - 11:43:03 | 204 |      13.959Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets?status=pending"

2026/02/03 11:43:03 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.374ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:43:03 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.062ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE status = "pending" AND `tickets`.`deleted_at` IS NULL

2026/02/03 11:43:03 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.106ms] [34;1m[rows:1][0m SELECT * FROM `tickets` WHERE status = "pending" AND `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/03 - 11:43:03 | 200 |     917.417Âµs |       127.0.0.1 | GET      "/api/v1/tickets?status=pending"
[GIN] 2026/02/03 - 11:43:17 | 204 |      51.542Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments"

2026/02/03 11:43:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:25
[0m[33m[0.208ms] [34;1m[rows:5][0m SELECT * FROM `departments` WHERE `departments`.`deleted_at` IS NULL ORDER BY sort_order, id

2026/02/03 11:43:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:86
[0m[33m[0.093ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 2 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 11:43:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:86
[0m[33m[0.129ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 3 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 11:43:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:86
[0m[33m[0.053ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 4 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 11:43:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:86
[0m[33m[0.190ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 7 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 11:43:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:86
[0m[33m[0.077ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 8 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/03 - 11:43:17 | 200 |    1.558667ms |       127.0.0.1 | GET      "/api/v1/departments"
[GIN] 2026/02/03 - 11:43:17 | 204 |       4.125Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/1/users"

2026/02/03 11:43:17 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.235ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "1" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:43:17 | 200 |     315.625Âµs |       127.0.0.1 | GET      "/api/v1/departments/1/users"
[GIN] 2026/02/03 - 11:43:20 | 204 |      14.459Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/2/users"

2026/02/03 11:43:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.485ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "2" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:43:20 | 200 |      845.75Âµs |       127.0.0.1 | GET      "/api/v1/departments/2/users"
[GIN] 2026/02/03 - 11:43:21 | 204 |        13.5Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/3/users"

2026/02/03 11:43:21 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[1.059ms] [34;1m[rows:3][0m SELECT * FROM `users` WHERE department_id = "3" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:43:21 | 200 |     1.42725ms |       127.0.0.1 | GET      "/api/v1/departments/3/users"
[GIN] 2026/02/03 - 11:43:22 | 204 |      13.125Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/4/users"

2026/02/03 11:43:22 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.990ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "4" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:43:22 | 200 |    2.532209ms |       127.0.0.1 | GET      "/api/v1/departments/4/users"
[GIN] 2026/02/03 - 11:43:22 | 204 |      14.459Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/5/users"

2026/02/03 11:43:22 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.556ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "5" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:43:22 | 200 |     899.958Âµs |       127.0.0.1 | GET      "/api/v1/departments/5/users"

2026/02/03 11:43:23 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.584ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "4" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:43:23 | 200 |     886.083Âµs |       127.0.0.1 | GET      "/api/v1/departments/4/users"

2026/02/03 11:43:24 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.969ms] [34;1m[rows:3][0m SELECT * FROM `users` WHERE department_id = "3" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:43:24 | 200 |    1.567917ms |       127.0.0.1 | GET      "/api/v1/departments/3/users"

2026/02/03 11:43:25 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.543ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "2" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:43:25 | 200 |     957.458Âµs |       127.0.0.1 | GET      "/api/v1/departments/2/users"
[GIN] 2026/02/03 - 11:43:25 | 204 |      15.875Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/1/users"

2026/02/03 11:43:25 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.396ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "1" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:43:25 | 200 |     614.333Âµs |       127.0.0.1 | GET      "/api/v1/departments/1/users"
[GIN] 2026/02/03 - 11:43:26 | 204 |      41.417Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/2/users"

2026/02/03 11:43:26 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.581ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "2" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:43:26 | 200 |    1.033375ms |       127.0.0.1 | GET      "/api/v1/departments/2/users"
[GIN] 2026/02/03 - 11:43:26 | 204 |      15.375Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/3/users"

2026/02/03 11:43:26 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.561ms] [34;1m[rows:3][0m SELECT * FROM `users` WHERE department_id = "3" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:43:26 | 200 |     894.417Âµs |       127.0.0.1 | GET      "/api/v1/departments/3/users"
[GIN] 2026/02/03 - 11:43:27 | 204 |      12.917Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/4/users"

2026/02/03 11:43:27 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.317ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "4" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:43:27 | 200 |         534Âµs |       127.0.0.1 | GET      "/api/v1/departments/4/users"
[GIN] 2026/02/03 - 11:43:27 | 204 |       13.75Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/5/users"

2026/02/03 11:43:27 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.674ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "5" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:43:27 | 200 |    1.226666ms |       127.0.0.1 | GET      "/api/v1/departments/5/users"

2026/02/03 11:43:28 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.531ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "4" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:43:28 | 200 |    1.032583ms |       127.0.0.1 | GET      "/api/v1/departments/4/users"
[GIN] 2026/02/03 - 11:44:10 | 204 |          13Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/3/users"

2026/02/03 11:44:10 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.494ms] [34;1m[rows:3][0m SELECT * FROM `users` WHERE department_id = "3" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:44:10 | 200 |       811.5Âµs |       127.0.0.1 | GET      "/api/v1/departments/3/users"
[GIN] 2026/02/03 - 11:46:08 | 204 |      11.833Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/03 11:46:08 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.262ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:46:08 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.038ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/03 11:46:08 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.103ms] [34;1m[rows:3][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/03 - 11:46:08 | 200 |     669.834Âµs |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/03 - 11:46:11 | 204 |      15.417Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments"

2026/02/03 11:46:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:25
[0m[33m[0.392ms] [34;1m[rows:5][0m SELECT * FROM `departments` WHERE `departments`.`deleted_at` IS NULL ORDER BY sort_order, id

2026/02/03 11:46:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:86
[0m[33m[0.221ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 2 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 11:46:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:86
[0m[33m[0.108ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 3 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 11:46:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:86
[0m[33m[0.054ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 4 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 11:46:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:86
[0m[33m[0.049ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 7 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 11:46:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:86
[0m[33m[0.050ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 8 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/03 - 11:46:11 | 200 |    1.303666ms |       127.0.0.1 | GET      "/api/v1/departments"
[GIN] 2026/02/03 - 11:46:11 | 204 |        8.25Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/1/users"

2026/02/03 11:46:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.346ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "1" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:46:11 | 200 |     474.208Âµs |       127.0.0.1 | GET      "/api/v1/departments/1/users"
[GIN] 2026/02/03 - 11:46:14 | 204 |      12.667Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/2/users"

2026/02/03 11:46:14 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.869ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "2" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:46:14 | 200 |    1.147584ms |       127.0.0.1 | GET      "/api/v1/departments/2/users"
[GIN] 2026/02/03 - 11:46:15 | 204 |      12.292Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/3/users"

2026/02/03 11:46:15 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.626ms] [34;1m[rows:3][0m SELECT * FROM `users` WHERE department_id = "3" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:46:15 | 200 |     964.083Âµs |       127.0.0.1 | GET      "/api/v1/departments/3/users"
[GIN] 2026/02/03 - 11:46:16 | 204 |      27.292Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/4/users"

2026/02/03 11:46:16 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.491ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "4" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:46:16 | 200 |     800.292Âµs |       127.0.0.1 | GET      "/api/v1/departments/4/users"
[GIN] 2026/02/03 - 11:46:16 | 204 |      16.042Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/5/users"

2026/02/03 11:46:16 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[1.256ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "5" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 11:46:16 | 200 |    1.711042ms |       127.0.0.1 | GET      "/api/v1/departments/5/users"
[GIN] 2026/02/03 - 11:46:18 | 204 |      13.958Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/03 11:46:18 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.397ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 11:46:18 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.059ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/03 11:46:18 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.127ms] [34;1m[rows:3][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/03 - 11:46:18 | 200 |     863.083Âµs |       127.0.0.1 | GET      "/api/v1/tickets"

2026/02/03 11:51:05 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:124
[0m[33m[0.246ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE type = "expense" AND `tickets`.`deleted_at` IS NULL

2026/02/03 11:51:05 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:125
[0m[33m[0.184ms] [34;1m[rows:3][0m SELECT * FROM `tickets` WHERE type = "expense" AND `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/03 - 11:51:05 | 200 |     917.542Âµs |       127.0.0.1 | GET      "/public/v1/approvals?type=expense"
[GIN] 2026/02/03 - 12:38:20 | 204 |      62.166Âµs |       127.0.0.1 | OPTIONS  "/api/v1/users/me"
[GIN] 2026/02/03 - 12:38:20 | 401 |     850.584Âµs |       127.0.0.1 | GET      "/api/v1/users/me"
[GIN] 2026/02/03 - 12:38:20 | 204 |       9.125Âµs |       127.0.0.1 | OPTIONS  "/api/v1/auth/refresh"

2026/02/03 12:38:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:154
[0m[33m[12.908ms] [34;1m[rows:1][0m SELECT * FROM `refresh_tokens` WHERE (token_hash = "ef0b4b8d4a697502b216b1f234c9c145690fbbb798f27f60cfe4e553517f21d7" AND revoked_at IS NULL AND expires_at > "2026-02-03 12:38:20.051") AND `refresh_tokens`.`deleted_at` IS NULL ORDER BY `refresh_tokens`.`id` LIMIT 1

2026/02/03 12:38:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:161
[0m[33m[1.100ms] [34;1m[rows:1][0m UPDATE `refresh_tokens` SET `created_at`="2026-02-03 11:40:53.648",`updated_at`="2026-02-03 12:38:20.064",`deleted_at`=NULL,`user_id`=1,`token_hash`="ef0b4b8d4a697502b216b1f234c9c145690fbbb798f27f60cfe4e553517f21d7",`expires_at`="2026-03-05 11:40:53.648",`revoked_at`="2026-02-03 12:38:20.064" WHERE `refresh_tokens`.`deleted_at` IS NULL AND `id` = 80

2026/02/03 12:38:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:174
[0m[33m[0.589ms] [34;1m[rows:1][0m INSERT INTO `refresh_tokens` (`created_at`,`updated_at`,`deleted_at`,`user_id`,`token_hash`,`expires_at`,`revoked_at`) VALUES ("2026-02-03 12:38:20.065","2026-02-03 12:38:20.065",NULL,1,"50d7d35a5ad9040c05d8c7148052e0b19b9cde4309966474ed358fd1398b7d6d","2026-03-05 12:38:20.065",NULL) RETURNING `id`
[GIN] 2026/02/03 - 12:38:20 | 200 |   15.452875ms |       127.0.0.1 | POST     "/api/v1/auth/refresh"

2026/02/03 12:38:20 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/user.go:24
[0m[33m[0.121ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 1 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/03 - 12:38:20 | 200 |     212.084Âµs |       127.0.0.1 | GET      "/api/v1/users/me"
[GIN] 2026/02/03 - 13:05:51 | 204 |      95.917Âµs |       127.0.0.1 | OPTIONS  "/public/v1/finance/bills/delete"
[GIN] 2026/02/03 - 13:07:29 | 204 |      15.292Âµs |       127.0.0.1 | OPTIONS  "/public/v1/finance/bills/delete"
[GIN] 2026/02/03 - 13:15:40 | 204 |      34.708Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"
[GIN] 2026/02/03 - 13:15:40 | 401 |          92Âµs |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/03 - 13:15:40 | 204 |       7.917Âµs |       127.0.0.1 | OPTIONS  "/api/v1/auth/refresh"

2026/02/03 13:15:40 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:154
[0m[33m[0.461ms] [34;1m[rows:1][0m SELECT * FROM `refresh_tokens` WHERE (token_hash = "50d7d35a5ad9040c05d8c7148052e0b19b9cde4309966474ed358fd1398b7d6d" AND revoked_at IS NULL AND expires_at > "2026-02-03 13:15:40.58") AND `refresh_tokens`.`deleted_at` IS NULL ORDER BY `refresh_tokens`.`id` LIMIT 1

2026/02/03 13:15:40 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:161
[0m[33m[2.270ms] [34;1m[rows:1][0m UPDATE `refresh_tokens` SET `created_at`="2026-02-03 12:38:20.065",`updated_at`="2026-02-03 13:15:40.581",`deleted_at`=NULL,`user_id`=1,`token_hash`="50d7d35a5ad9040c05d8c7148052e0b19b9cde4309966474ed358fd1398b7d6d",`expires_at`="2026-03-05 12:38:20.065",`revoked_at`="2026-02-03 13:15:40.58" WHERE `refresh_tokens`.`deleted_at` IS NULL AND `id` = 81

2026/02/03 13:15:40 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/auth.go:174
[0m[33m[1.780ms] [34;1m[rows:1][0m INSERT INTO `refresh_tokens` (`created_at`,`updated_at`,`deleted_at`,`user_id`,`token_hash`,`expires_at`,`revoked_at`) VALUES ("2026-02-03 13:15:40.583","2026-02-03 13:15:40.583",NULL,1,"31b8cc60181827b9954e242199530affeed6290039f34bd92f1a6c68edfdf6a4","2026-03-05 13:15:40.583",NULL) RETURNING `id`
[GIN] 2026/02/03 - 13:15:40 | 200 |       5.457ms |       127.0.0.1 | POST     "/api/v1/auth/refresh"

2026/02/03 13:15:40 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.771ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 13:15:40 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.214ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/03 13:15:40 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.270ms] [34;1m[rows:3][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/03 - 13:15:40 | 200 |    1.540334ms |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/03 - 13:15:54 | 204 |      43.792Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments"

2026/02/03 13:15:54 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:25
[0m[33m[0.710ms] [34;1m[rows:5][0m SELECT * FROM `departments` WHERE `departments`.`deleted_at` IS NULL ORDER BY sort_order, id

2026/02/03 13:15:54 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:86
[0m[33m[0.182ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 2 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 13:15:54 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:86
[0m[33m[0.082ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 3 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 13:15:54 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:86
[0m[33m[0.049ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 4 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 13:15:54 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:86
[0m[33m[0.041ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 7 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 13:15:54 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:86
[0m[33m[0.042ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 8 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/03 - 13:15:54 | 200 |    1.494375ms |       127.0.0.1 | GET      "/api/v1/departments"
[GIN] 2026/02/03 - 13:15:54 | 204 |       6.083Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/1/users"

2026/02/03 13:15:54 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.303ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "1" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 13:15:54 | 200 |      407.25Âµs |       127.0.0.1 | GET      "/api/v1/departments/1/users"
[GIN] 2026/02/03 - 13:15:58 | 204 |      14.334Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/2/users"

2026/02/03 13:15:58 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.699ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "2" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 13:15:58 | 200 |    1.069917ms |       127.0.0.1 | GET      "/api/v1/departments/2/users"
[GIN] 2026/02/03 - 13:15:59 | 204 |      21.375Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/3/users"

2026/02/03 13:15:59 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.502ms] [34;1m[rows:3][0m SELECT * FROM `users` WHERE department_id = "3" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 13:15:59 | 200 |       859.5Âµs |       127.0.0.1 | GET      "/api/v1/departments/3/users"
[GIN] 2026/02/03 - 13:16:00 | 204 |      12.958Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/4/users"

2026/02/03 13:16:00 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.412ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "4" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 13:16:00 | 200 |      994.25Âµs |       127.0.0.1 | GET      "/api/v1/departments/4/users"
[GIN] 2026/02/03 - 13:16:00 | 204 |      13.917Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/5/users"

2026/02/03 13:16:00 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[1.244ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "5" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 13:16:00 | 200 |    1.528084ms |       127.0.0.1 | GET      "/api/v1/departments/5/users"

2026/02/03 13:16:01 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.334ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "4" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 13:16:01 | 200 |     529.375Âµs |       127.0.0.1 | GET      "/api/v1/departments/4/users"

2026/02/03 13:16:02 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.446ms] [34;1m[rows:3][0m SELECT * FROM `users` WHERE department_id = "3" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 13:16:02 | 200 |     791.875Âµs |       127.0.0.1 | GET      "/api/v1/departments/3/users"

2026/02/03 13:16:03 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.517ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "4" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 13:16:03 | 200 |    1.202792ms |       127.0.0.1 | GET      "/api/v1/departments/4/users"

2026/02/03 13:16:04 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.570ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "5" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 13:16:04 | 200 |    1.014416ms |       127.0.0.1 | GET      "/api/v1/departments/5/users"
[GIN] 2026/02/03 - 13:16:07 | 204 |      12.375Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/4/users"

2026/02/03 13:16:07 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.635ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "4" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 13:16:07 | 200 |    1.005166ms |       127.0.0.1 | GET      "/api/v1/departments/4/users"
[GIN] 2026/02/03 - 13:16:13 | 204 |      15.375Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/03 13:16:13 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.275ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 13:16:13 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.045ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/03 13:16:13 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.112ms] [34;1m[rows:3][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/03 - 13:16:13 | 200 |     716.333Âµs |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/03 - 13:17:04 | 204 |       9.375Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/03 13:17:04 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.237ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 13:17:04 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.065ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/03 13:17:04 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.111ms] [34;1m[rows:3][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/03 - 13:17:04 | 200 |     714.209Âµs |       127.0.0.1 | GET      "/api/v1/tickets"
[GIN] 2026/02/03 - 13:17:45 | 204 |      13.458Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments"

2026/02/03 13:17:45 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:25
[0m[33m[0.695ms] [34;1m[rows:5][0m SELECT * FROM `departments` WHERE `departments`.`deleted_at` IS NULL ORDER BY sort_order, id

2026/02/03 13:17:45 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:86
[0m[33m[0.215ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 2 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 13:17:45 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:86
[0m[33m[0.119ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 3 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 13:17:45 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:86
[0m[33m[0.053ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 4 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 13:17:45 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:86
[0m[33m[0.048ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 7 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1

2026/02/03 13:17:45 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:86
[0m[33m[0.043ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = 8 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
[GIN] 2026/02/03 - 13:17:45 | 200 |    1.823792ms |       127.0.0.1 | GET      "/api/v1/departments"
[GIN] 2026/02/03 - 13:17:45 | 204 |       6.708Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/1/users"

2026/02/03 13:17:45 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.346ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "1" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 13:17:45 | 200 |     583.125Âµs |       127.0.0.1 | GET      "/api/v1/departments/1/users"
[GIN] 2026/02/03 - 13:18:00 | 204 |       13.75Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/3/users"

2026/02/03 13:18:00 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.638ms] [34;1m[rows:3][0m SELECT * FROM `users` WHERE department_id = "3" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 13:18:00 | 200 |     995.541Âµs |       127.0.0.1 | GET      "/api/v1/departments/3/users"
[GIN] 2026/02/03 - 13:18:11 | 204 |      12.292Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/2/users"

2026/02/03 13:18:11 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.656ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "2" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 13:18:11 | 200 |     946.417Âµs |       127.0.0.1 | GET      "/api/v1/departments/2/users"
[GIN] 2026/02/03 - 13:18:12 | 204 |      13.042Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/1/users"

2026/02/03 13:18:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.705ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "1" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 13:18:12 | 200 |    1.095375ms |       127.0.0.1 | GET      "/api/v1/departments/1/users"
[GIN] 2026/02/03 - 13:18:12 | 204 |      16.792Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/3/users"

2026/02/03 13:18:12 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.583ms] [34;1m[rows:3][0m SELECT * FROM `users` WHERE department_id = "3" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 13:18:12 | 200 |     969.791Âµs |       127.0.0.1 | GET      "/api/v1/departments/3/users"
[GIN] 2026/02/03 - 13:18:13 | 204 |      27.125Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/4/users"

2026/02/03 13:18:13 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.384ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "4" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 13:18:13 | 200 |     851.667Âµs |       127.0.0.1 | GET      "/api/v1/departments/4/users"
[GIN] 2026/02/03 - 13:18:13 | 204 |      14.375Âµs |       127.0.0.1 | OPTIONS  "/api/v1/departments/5/users"

2026/02/03 13:18:13 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.819ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "5" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 13:18:13 | 200 |    1.135708ms |       127.0.0.1 | GET      "/api/v1/departments/5/users"

2026/02/03 13:18:13 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.604ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "4" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 13:18:13 | 200 |    1.014458ms |       127.0.0.1 | GET      "/api/v1/departments/4/users"

2026/02/03 13:18:14 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.926ms] [34;1m[rows:3][0m SELECT * FROM `users` WHERE department_id = "3" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 13:18:14 | 200 |    1.368375ms |       127.0.0.1 | GET      "/api/v1/departments/3/users"

2026/02/03 13:18:14 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.679ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "2" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 13:18:14 | 200 |    1.174833ms |       127.0.0.1 | GET      "/api/v1/departments/2/users"

2026/02/03 13:18:15 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/department.go:46
[0m[33m[0.526ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE department_id = "1" AND `users`.`deleted_at` IS NULL
[GIN] 2026/02/03 - 13:18:15 | 200 |    1.062625ms |       127.0.0.1 | GET      "/api/v1/departments/1/users"
[GIN] 2026/02/03 - 13:19:21 | 204 |      30.625Âµs |       127.0.0.1 | OPTIONS  "/api/v1/tickets"

2026/02/03 13:19:21 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/middleware/auth.go:59
[0m[33m[0.679ms] [34;1m[rows:1][0m SELECT count(*) FROM `users` JOIN user_roles ur ON ur.user_id = users.id JOIN role_permissions rp ON rp.role_id = ur.role_id JOIN permissions p ON p.id = rp.permission_id WHERE (users.id = 1 AND p.code = "ticket:read") AND `users`.`deleted_at` IS NULL

2026/02/03 13:19:21 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:73
[0m[33m[0.188ms] [34;1m[rows:1][0m SELECT count(*) FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL

2026/02/03 13:19:21 [32m/Users/sunqiang/Desktop/OA_Worker/backend/internal/handler/ticket.go:74
[0m[33m[0.185ms] [34;1m[rows:3][0m SELECT * FROM `tickets` WHERE `tickets`.`deleted_at` IS NULL ORDER BY id desc LIMIT 20
[GIN] 2026/02/03 - 13:19:21 | 200 |    1.582167ms |       127.0.0.1 | GET      "/api/v1/tickets"
